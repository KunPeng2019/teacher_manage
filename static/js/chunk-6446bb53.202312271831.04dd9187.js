(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6446bb53"],{"08ec":function(e,t,a){},"21cd":function(e,t,a){},"2b83":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"library-subject"},[a("div",{staticClass:"edit_title"},[e._v("编辑第"+e._s(e.subjectIndex+1)+"题")]),a("el-form",{ref:"formSubject",attrs:{model:e.formSubject,size:"small",rules:e.rulesSubject,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"题目类型",prop:"type"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择题目类型"},on:{change:e.subjectTypeChange},model:{value:e.formSubject.type,callback:function(t){e.$set(e.formSubject,"type",t)},expression:"formSubject.type"}},e._l(e.subjectTypeOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"题目标题",prop:"title"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:6},placeholder:"请输入题目标题",maxlength:"1000","show-word-limit":""},model:{value:e.formSubject.title,callback:function(t){e.$set(e.formSubject,"title",t)},expression:"formSubject.title"}})],1),[1,2].indexOf(e.formSubject.type)>-1?a("el-form-item",{attrs:{label:"题目选项",required:""}},[a("div",{staticStyle:{"text-align":"right","margin-right":"15px"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.formSubject.options.length<8,expression:"formSubject.options.length<8"}],attrs:{type:"primary",size:"mini"},on:{click:e.subjectOptionsAdd}},[e._v(" 新增 ")])],1),a("el-table",{staticStyle:{width:"100%","margin-bottom":"0"},attrs:{size:"mini",data:e.formSubject.options,"cell-style":{border:0}}},[a("el-table-column",{attrs:{prop:"value",label:"选项",width:"60"}}),a("el-table-column",{attrs:{prop:"label",label:"选项内容"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form-item",{staticStyle:{"margin-bottom":"15px"},attrs:{prop:"options."+t.$index+".label",rules:e.rulesSubject.options.label}},[a("el-input",{attrs:{placeholder:"请输入选项内容"},model:{value:t.row.label,callback:function(a){e.$set(t.row,"label",a)},expression:"scope.row.label"}})],1)]}}],null,!1,3851429499)}),a("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.formSubject.options.length>2,expression:"formSubject.options.length>2"}],attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.subjectOptionsDelete(t.row)}}},[e._v("删除 ")])]}}],null,!1,809594447)})],1)],1):e._e(),2===e.formSubject.type?a("el-form-item",{attrs:{label:"题目答案",prop:"multiAnswer"}},[a("el-checkbox-group",{model:{value:e.formSubject.multiAnswer,callback:function(t){e.$set(e.formSubject,"multiAnswer",t)},expression:"formSubject.multiAnswer"}},e._l(e.formSubject.options,(function(e,t){return a("el-checkbox-button",{key:t,attrs:{label:e.value,value:e.value}})})),1)],1):a("el-form-item",{attrs:{label:"题目答案",prop:"answer",rules:{required:4!==e.formSubject.type,message:"请选择或输入题目答案",trigger:"change"}}},[1===e.formSubject.type?a("el-radio-group",{model:{value:e.formSubject.answer,callback:function(t){e.$set(e.formSubject,"answer",t)},expression:"formSubject.answer"}},e._l(e.formSubject.options,(function(e,t){return a("el-radio-button",{key:t,attrs:{label:e.value,value:e.value}})})),1):3===e.formSubject.type?a("el-radio-group",{model:{value:e.formSubject.answer,callback:function(t){e.$set(e.formSubject,"answer",t)},expression:"formSubject.answer"}},e._l(e.judgeOptions,(function(e,t){return a("el-radio-button",{key:t,attrs:{label:e,value:e}})})),1):a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:6},placeholder:"请输入题目答案",maxlength:"1000","show-word-limit":""},model:{value:e.formSubject.answer,callback:function(t){e.$set(e.formSubject,"answer",t)},expression:"formSubject.answer"}})],1),a("el-form-item",{attrs:{label:"题目分数",prop:"score"}},[a("el-input-number",{attrs:{min:1,max:1e3,label:"请输入题目分数","controls-position":"right",precision:0,step:1},model:{value:e.formSubject.score,callback:function(t){e.$set(e.formSubject,"score",t)},expression:"formSubject.score"}})],1),a("el-form-item",{attrs:{label:"题目解析",prop:"analysis"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:6},placeholder:"题目解析",maxlength:"1000","show-word-limit":""},model:{value:e.formSubject.analysis,callback:function(t){e.$set(e.formSubject,"analysis",t)},expression:"formSubject.analysis"}})],1),a("el-form-item",{staticStyle:{"text-align":"center"}},[e.updateMode?a("div",[a("el-button",{attrs:{size:"mini"},on:{click:e.handleCancel}},[e._v("取消")]),a("el-button",{attrs:{size:"mini",loading:e.btnLoading,type:"primary"},on:{click:e.saveFormSubject}},[e.formSubject.isAdd?a("span",[e._v("提交保存")]):a("span",[e._v("提交修改")])])],1):a("div",[a("el-button",{attrs:{size:"mini"},on:{click:e.handleCancel}},[e._v("关闭")]),a("el-button",{attrs:{size:"mini",loading:e.btnLoading,disabled:e.btnDisabled,type:"primary"},on:{click:e.saveFormSubject}},[e._v(" 保存 ")]),e.btnDisabled?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.nextSubject()}}},[e._v("下一题")]):e._e()],1)])],1)],1)},s=[],i=(a("c975"),a("a15b"),a("d81d"),a("a434"),a("a9e3"),a("a397")),o={name:"LibrarySubject",props:{fromId:{type:String,default:""},index:{type:Number,default:0},updateMode:{type:Boolean,default:!1},subjectSelected:{type:Object}},data:function(){return{subjectIndex:this.index||0,subjectTypeOptions:[{label:"单选题",value:1},{label:"多选题",value:2},{label:"判断题",value:3},{label:"问答题",value:4}],singleOptions:["A","B","C","D","E","F","G","H"],judgeOptions:["对","错"],formSubject:{isAdd:!0,fromId:"",type:1,title:"",options:[],answer:"",multiAnswer:[],score:0,analysis:""},rulesSubject:{title:{required:!0,min:1,max:500,message:"长度在 1 到 500 个字符",trigger:"blur"},options:{label:{required:!0,min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"},value:{required:!0,min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}},multiAnswer:{required:!0,type:"array",message:"请至少选择一个答案",trigger:"change"},score:[{required:!0,message:"题目分数不能为空"},{type:"number",message:"题目分数必须为数字值"}],analysis:{required:!1,min:1,max:500,message:"长度在 1 到 500 个字符",trigger:"blur"},time:[{required:!0,message:"试卷计时不能为空"},{type:"number",message:"试卷计时必须为数字值"}]},btnLoading:!1,btnDisabled:!1,isChanged:!1}},mounted:function(){var e=this;this.$nextTick((function(){e.$refs["formSubject"]&&e.$refs["formSubject"].resetFields(),e.subjectTypeChange(1),e.subjectSelected&&(e.formSubject=e.subjectSelected)}))},methods:{subjectTypeChange:function(e){if(1===e||2===e){this.formSubject.options=[];for(var t=0;t<4;t++)this.formSubject.options.push({label:"",value:this.singleOptions[t]})}this.formSubject.answer="",this.formSubject.multiAnswer=[]},subjectOptionsAdd:function(){1!==this.formSubject.type&&2!==this.formSubject.type||this.formSubject.options.push({label:"",value:this.singleOptions[this.formSubject.options.length]})},subjectOptionsDelete:function(e){var t=this;if(this.formSubject.options.length<3)this.$message({showClose:!0,message:"必须有两个以上选项",type:"error"});else{var a=this.formSubject.options.indexOf(e);a>-1&&this.formSubject.options.splice(a,1),this.formSubject.options.map((function(e,a){e.value=t.singleOptions[a]}))}},saveFormSubject:function(){var e=this;this.$refs["formSubject"].validate((function(t){if(!t)return e.$message({showClose:!0,message:"请输入正确格式",type:"error"}),!1;e.btnLoading=!0;var a={PLID:e.fromId||e.formSubject.fromId,PSType:e.formSubject.type,PSContent:e.formSubject.title,PSAnswer:2===e.formSubject.type?e.formSubject.multiAnswer.sort().join(""):e.formSubject.answer,PSanalysis:e.formSubject.analysis,PSScore:e.formSubject.score};e.updateMode&&(a.PSID=e.formSubject.id);var n={Datas:4===e.formSubject.type?[]:e.formSubject.options.map((function(e){return{SOSerial:e.value,SOContent:e.label}}))};e.updateMode&&!e.formSubject.isAdd?e.dataUpdateSave(JSON.stringify(a),JSON.stringify(n)):e.dataAddSave(JSON.stringify(a),JSON.stringify(n))}))},dataAddSave:function(e,t){var a=this;i["a"].IClassPractise.SubjectDataAdd(e,t).then((function(e){e.Result?(a.$message({message:"操作成功！",type:"success"}),a.updateMode?a.$emit("change"):(a.isChanged=!0,a.btnDisabled=!0)):e.Info&&a.$message.error(e.Info),a.btnLoading=!1})).catch((function(){a.btnLoading=!1}))},dataUpdateSave:function(e,t){var a=this;i["a"].IClassPractise.SubjectDataSave(e,t).then((function(e){e.Result?(a.$message({message:"操作成功！",type:"success"}),a.updateMode?a.$emit("change"):(a.isChanged=!0,a.btnDisabled=!0)):e.Info&&a.$message.error(e.Info),a.btnLoading=!1})).catch((function(){a.btnLoading=!1}))},nextSubject:function(){this.subjectIndex++,this.resetFormSubject()},resetFormSubject:function(){this.btnDisabled=!1,this.$refs["formSubject"]&&this.$refs["formSubject"].resetFields(),this.formSubject.isAdd=!0,this.formSubject.id="",this.formSubject.type=1,this.formSubject.title="",this.formSubject.answer="",this.formSubject.score=0,this.formSubject.analysis="",this.subjectTypeChange(1)},handleCancel:function(){this.$emit("cancel",this.isChanged)}}},r=o,l=(a("514b"),a("2877")),c=Object(l["a"])(r,n,s,!1,null,null,null);t["default"]=c.exports},3751:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"log"},[a("WeekCalendar",{attrs:{Concise:"",value:e.ChooseDate},on:{"update:value":function(t){e.ChooseDate=t},ValueChanged:e.DateChanged}}),a("p",{staticClass:"title"},[e._v(" "+e._s(e.FormatDate(e.ChooseDate))+"终端日志 "),e.FormatDate(e.ChooseDate)===e.FormatDate(new Date)?a("i",{staticClass:"el-icon-refresh",on:{click:e.SyncLog}}):e._e()]),e.logs?a("div",{staticClass:"lists"},[a("ul",e._l(e.logs,(function(t,n){return a("li",{key:n},[a("div",[a("span",[e._v(e._s(t.LogTime))])]),a("div",[a("p",[a("span",[e._v("动作："+e._s(t.LogAction))])]),a("p",[a("span",[e._v("结果："+e._s(t.LogResult))])])])])})),0)]):e._e(),e.logs?e._e():a("div",{staticClass:"none"},[a("p",[e._v(e._s(e.FormatDate(e.ChooseDate))+" 无日志")])])],1)},s=[],i=(a("4160"),a("d3b7"),a("159b"),a("96cf"),a("c964")),o=a("c1df"),r=a.n(o),l=a("a397"),c={components:{WeekCalendar:function(){return a.e("chunk-461ba3a0").then(a.bind(null,"ca38"))}},props:{TerminalInfo:{type:Object,default:function(){return null}}},data:function(){return{ChooseDate:"",logs:null}},mounted:function(){},methods:{FormatDate:function(e){return r()(e).format("YYYY-MM-DD")},FormatSDate:function(e){return r()(e).format("YYYY-MM-DD")+" 00:00:00"},FormatEDate:function(e){return r()(e).format("YYYY-MM-DD")+" 23:59:59"},DateChanged:function(e){this.getlog(e+" 00:00:00",e+" 23:59:59")},SyncLog:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.$parent.$route.params.id,t.next=3,l["a"].Ctrl.SyncCtrlLog(a,e.TerminalInfo.DeviceSerialNo,e.TerminalInfo.DeviceInfo.IP,e.TerminalInfo.DeviceInfo.Port);case 3:n=t.sent,n.Datas&&n.Datas.length>0?e.LoadLog(n):e.logs=null;case 5:case"end":return t.stop()}}),t)})))()},getlog:function(e,t){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var s,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=a.$parent.$route.params.id,a.logs=[],n.next=4,l["a"].Ctrl.GetControlLogBySNoDate(s,e,t);case 4:i=n.sent,i.Datas&&i.Datas.length>0?a.LoadLog(i):a.logs=null;case 6:case"end":return n.stop()}}),n)})))()},LoadLog:function(e){var t=this;e.Datas.forEach((function(e){-1===e.LogType?t.logs.push({LogTime:r()(e.LogTime).format("HH:mm:ss"),LogAction:"设备离线",LogResult:"#"}):0===e.LogType?t.logs.push({LogTime:r()(e.LogTime).format("HH:mm:ss"),LogAction:"关机",LogResult:"#"}):1===e.LogType?t.logs.push({LogTime:r()(e.LogTime).format("HH:mm:ss"),LogAction:"关机中",LogResult:"#"}):2===e.LogType?t.logs.push({LogTime:r()(e.LogTime).format("HH:mm:ss"),LogAction:"开机中",LogResult:"#"}):3===e.LogType?t.logs.push({LogTime:r()(e.LogTime).format("HH:mm:ss"),LogAction:"已开机",LogResult:"#"}):e.LogAction&&t.logs.push({LogTime:r()(e.LogTime).format("HH:mm:ss"),LogAction:e.LogAction,LogResult:e.LogResult})}))}}},u=c,d=(a("ad90"),a("2877")),m=Object(d["a"])(u,n,s,!1,null,null,null);t["default"]=m.exports},"3e08":function(e,t,a){"use strict";a("eced")},"400a":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"formTitle",attrs:{model:e.formTitle,rules:e.rulesTitle,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"题库名称",prop:"title"}},[a("el-input",{attrs:{placeholder:"请输入题库名称",maxlength:"80","show-word-limit":""},model:{value:e.formTitle.title,callback:function(t){e.$set(e.formTitle,"title",t)},expression:"formTitle.title"}})],1),a("el-form-item",{staticStyle:{"text-align":"center"}},[e.dataEdit?a("div",[a("el-button",{attrs:{size:"mini"},on:{click:e.handleCancel}},[e._v("取消")]),a("el-button",{attrs:{loading:e.btnLoading,size:"mini",type:"primary"},on:{click:function(t){return e.saveFormTitle("formTitle")}}},[e._v("提交修改 ")])],1):a("div",[a("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")]),a("el-button",{attrs:{loading:e.btnLoading,size:"mini",type:"primary"},on:{click:function(t){return e.saveFormTitle("formTitle")}}},[e._v("下一步 ")])],1)])],1)],1)},s=[],i=a("a397"),o={name:"LibraryTitle",props:{practiceLibrary:{type:String,default:null}},data:function(){return{formTitle:{id:"",title:""},rulesTitle:{title:{required:!0,min:1,max:80,message:"长度在 1 到 80 个字符",trigger:"blur"}},btnLoading:!1,dataEdit:!1}},created:function(){this.practiceLibrary&&(this.dataEdit=!0,this.formTitle.id=this.practiceLibrary.id,this.formTitle.title=this.practiceLibrary.title)},methods:{saveFormTitle:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return t.$message.error("请输入正确格式"),!1;t.btnLoading=!0,i["a"].IClassPractise.LibraryDataSave(t.formTitle.id,"",t.formTitle.title).then((function(e){e.Result?(e.Data&&(t.formTitle.id=e.Data),t.$message.success("操作成功"),t.$emit("change",t.formTitle)):e.Info&&t.$message.error(e.Info),t.btnLoading=!1})).catch((function(){t.btnLoading=!1}))}))},handleCancel:function(){this.$emit("cancel")}}},r=o,l=a("2877"),c=Object(l["a"])(r,n,s,!1,null,"52d74cd5",null);t["default"]=c.exports},"400f":function(e,t,a){"use strict";a("08ec")},4562:function(e,t,a){},"498a":function(e,t,a){"use strict";var n=a("23e7"),s=a("58a8").trim,i=a("c8d2");n({target:"String",proto:!0,forced:i("trim")},{trim:function(){return s(this)}})},"514b":function(e,t,a){"use strict";a("ea3b")},"525f":function(e,t,a){},"629c":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-cascader",{key:e.DeviceType,ref:"cascader",attrs:{"popper-class":"CascaderTBM",placeholder:e.placeholder,options:e.options,props:e.oprops,"show-all-levels":!1,clearable:"","collapse-tags":"",size:e.size},on:{change:e.ChangeHandle},scopedSlots:e._u([{key:"default",fn:function(t){t.node;var n=t.data;return[a("span",[e._v(e._s(n.Name))])]}}]),model:{value:e.Value,callback:function(t){e.Value=t},expression:"Value"}})},s=[],i=(a("99af"),a("7db0"),a("4160"),a("c975"),a("fb6a"),a("a9e3"),a("ac1f"),a("466d"),a("1276"),a("498a"),a("159b"),a("96cf"),a("c964")),o=a("a397"),r={props:{size:{type:String,default:"mini"},value:{},placeholder:{type:String,default:"请选择"},Values:{type:Array,default:function(){return[]}},Level:{type:Number,default:1},DeviceType:{type:Number,default:-1},checkStrictly:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1}},watch:{value:function(e,t){this.Value=e},DeviceType:function(e,t){var a=this;this.options.forEach((function(e){a.DeviceType<0||e.IDs.indexOf(a.DeviceType)>=0?a.$set(e,"disabled",!1):a.$set(e,"disabled",!0)}))}},data:function(){return{Value:this.value,options:1===this.Level?null:[],oprops:{multiple:this.multiple,checkStrictly:this.checkStrictly,emitPath:!1,expandTrigger:"hover",value:"ID",id:"ID",label:"Name",children:"options"}}},mounted:function(){this.LoadData()},methods:{ChangeHandle:function(e){this.$emit("update:value",this.Value);var t=this.$refs.cascader.getCheckedNodes();if(t&&t.length>0){this.$emit("update:Values",this.$refs.cascader.getCheckedNodes()[0].path);var n=[],s=[];t[0].pathLabels.forEach((function(e){e.match(/\((.+?)\)/)&&n.push(e.match(/\((.+?)\)/)[1]),s.push(e.trim().split(" ")[0])})),this.$emit("update:code",n),this.$emit("update:name",s)}else this.$emit("update:Values",[]),this.$emit("update:code",[]),this.$emit("update:name",[]);var i=a("eb11"),o=JSON.stringify(e),r="";o&&(r=i.compressToBase64(o.slice(1,o.length-1))),this.$emit("Filter",r),this.$emit("ChangeModel",e)},LoadData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.options=[{Level:1,ID:1,IDs:[1],Name:"中控、终端",options:1===e.Level?null:[]},{Level:1,ID:2,IDs:[2],Name:"PC",options:1===e.Level?null:[]},{Level:1,ID:3,IDs:[3],Name:"IP电话",options:1===e.Level?null:[]},{Level:1,ID:4,IDs:[4],Name:"摄像头",options:1===e.Level?null:[]},{Level:1,ID:5,IDs:[5],Name:"课件编码器",options:1===e.Level?null:[]},{Level:1,ID:7,IDs:[7],Name:"IC卡读卡器",options:1===e.Level?null:[]},{Level:1,ID:9,IDs:[9],Name:"录播主机",options:1===e.Level?null:[]},{Level:1,ID:11,IDs:[11],Name:"投影仪",options:1===e.Level?null:[]},{Level:1,ID:12,IDs:[12],Name:"门禁主机",options:1===e.Level?null:[]},{Level:1,ID:13,IDs:[13],Name:"电源箱",options:1===e.Level?null:[]},{Level:1,ID:14,IDs:[14],Name:"音箱",options:1===e.Level?null:[]},{Level:1,ID:8,IDs:[8],Name:"485物联设备",options:1===e.Level?null:[]},{Level:1,ID:15,IDs:[15],Name:"LED屏",options:1===e.Level?null:[]},{Level:1,ID:16,IDs:[16],Name:"互动网关",options:1===e.Level?null:[]}],1===e.Level?e.options.push({Level:1,ID:30,IDs:[30],Name:"情景面板",options:1===e.Level?null:[]},{Level:1,ID:40,IDs:[40],Name:"睿和网关",options:1===e.Level?null:[]},{Level:1,ID:41,IDs:[41],Name:"睿和单开面板",options:1===e.Level?null:[]},{Level:1,ID:42,IDs:[42],Name:"睿和双开面板",options:1===e.Level?null:[]},{Level:1,ID:43,IDs:[43],Name:"睿和三开面板",options:1===e.Level?null:[]},{Level:1,ID:44,IDs:[44],Name:"睿和调光器",options:1===e.Level?null:[]},{Level:1,ID:45,IDs:[45],Name:"睿和红外转发器",options:1===e.Level?null:[]},{Level:1,ID:46,IDs:[46],Name:"睿和调速器",options:1===e.Level?null:[]},{Level:1,ID:47,IDs:[47],Name:"睿和调速器",options:1===e.Level?null:[]},{Level:1,ID:48,IDs:[48],Name:"原版红外转发器",options:1===e.Level?null:[]}):e.options.push({Level:1,ID:41,IDs:[20,21,22,23,24,30,40,41,42,43,44,45,46,47,48],Name:"物联网",options:1===e.Level?null:[]}),e.options.push({Level:1,ID:9999,IDs:[9999],Name:"其它",options:1===e.Level?null:[]}),e.options.forEach((function(t){e.DeviceType<0||t.IDs.indexOf(e.DeviceType)>=0?e.$set(t,"disabled",!1):e.$set(t,"disabled",!0)})),!(e.Level>1)){t.next=12;break}return t.next=7,o["a"].Brand.GetAllDatas();case 7:return a=t.sent,t.next=10,o["a"].Model.GetAllDatas();case 10:n=t.sent,a&&n&&n.Datas&&n.Datas.forEach((function(t){var n=e.options.find((function(e){return e.IDs.indexOf(t.DeviceType)>=0}));if(n){var s=n.options.find((function(e){return e.ID===t.BrandID}));if(s);else{var i=a.Datas.find((function(e){return e.BrandID===t.BrandID}));i&&(s={Level:2,ID:i.BrandID,Name:"".concat(i.BrandName," (").concat(i.BrandCode,")"),options:1===e.Level?null:[]},n.options.push(s))}s&&s.options.push({Level:3,ID:t.ModelID,Name:"".concat(t.ModelName," (").concat(t.ModelCode,")"),options:null})}}));case 12:case"end":return t.stop()}}),t)})))()}}},l=r,c=(a("f388"),a("2877")),u=Object(c["a"])(l,n,s,!1,null,null,null);t["default"]=u.exports},"639c":function(e,t,a){"use strict";a("4562")},"672a":function(e,t,a){"use strict";a("9a50")},"72ba":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-select",{attrs:{filterable:"",multiple:e.multiple,placeholder:e.placeholder,clearable:"","collapse-tags":"",size:e.size,"reserve-keyword":""},on:{change:e.ChangeHandle},model:{value:e.Value,callback:function(t){e.Value=t},expression:"Value"}},e._l(e.Datas,(function(e){return a("el-option",{key:e.Key.TermID,attrs:{label:e.Key.TermName+" "+e.XQ+" ",value:e.Key.TermID}})})),1)},s=[],i=(a("4160"),a("159b"),a("96cf"),a("c964")),o=a("a397"),r={props:{size:{type:String,default:"mini"},multiple:{type:Boolean,default:!1},value:{},text:{type:String,default:""},TooltipPlacement:{type:String,default:"right"},placeholder:{type:String,default:"请输入关键词"}},data:function(){return{Value:this.value,Datas:[]}},mounted:function(){this.LoadData()},watch:{value:function(e){this.Value=e,this.LoadData()}},methods:{ChangeHandle:function(){var e=this;if(this.$emit("update:value",this.Value),this.Value&&this.multiple){var t="";this.Value.forEach((function(a,n){t+=a,n<e.Value.length-1&&(t+=",")})),this.$emit("Filter",t)}},LoadData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o["a"].Term.GetDatas();case 2:a=t.sent,a&&(e.Datas=a.Datas);case 4:case"end":return t.stop()}}),t)})))()}}},l=r,c=a("2877"),u=Object(c["a"])(l,n,s,!1,null,null,null);t["default"]=u.exports},"73e4":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"discussion"},[a("div",{staticClass:"item-hd"},[a("div",{staticClass:"line-title"},[e._v("小组讨论")]),a("div",[a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.disabled},on:{click:e.searchData}},[e._v("刷新")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.disabled},on:{click:e.dataAdd}},[e._v("添加")])],1)]),a("Table",{ref:"table",attrs:{ShowTopBar:!1,ShowTblFoot:!1,ShowExport:!1,ShowSelectColumn:!1,Loading:e.searchLoading,Columns:e.dataColumns,Datas:e.dataList,UnNeedEstateBtn:!0,showMaxeight:!1},on:{"update:Datas":function(t){e.dataList=t},"update:datas":function(t){e.dataList=t},LoadData:e.searchData},scopedSlots:e._u([{key:"createTime",fn:function(t){return[a("span",[e._v(e._s(e.formatDate(t.row.createTime,"yyyy-MM-dd")))])]}},{key:"oprate",fn:function(t){return[a("el-button-group",[a("el-button",{attrs:{plain:"",type:"success",size:"mini",icon:"el-icon-edit",disabled:e.disabled},on:{click:function(a){return e.dataEdit(t.row)}}},[e._v(" 修改 ")]),a("el-button",{attrs:{plain:"",type:"danger",size:"mini",icon:"el-icon-close",disabled:e.disabled},on:{click:function(a){return e.dataDrop(t.row)}}},[e._v(" 移除 ")])],1)]}}])}),a("el-dialog",{attrs:{title:"小组讨论编辑",visible:e.showEdit,width:"600px",center:"","close-on-click-modal":!1,"modal-append-to-body":!1},on:{"update:visible":function(t){e.showEdit=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,size:"small"}},[a("el-form-item",{attrs:{label:"",prop:"title"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:10},placeholder:"请输入小组讨论题目",maxlength:"500","show-word-limit":!0},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),a("el-form-item",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{loading:e.btnLoading,type:"primary"},on:{click:function(t){return e.dataSave("form")}}},[e._v("保 存")]),a("el-button",{on:{click:function(t){e.showEdit=!1}}},[e._v("取 消")])],1)],1)],1)],1)},s=[],i=(a("4160"),a("d3b7"),a("159b"),a("a397")),o=a("db13"),r={components:{Table:function(){return a.e("chunk-347ed62b").then(a.bind(null,"0748"))}},props:{disabled:{type:Boolean,default:!1}},data:function(){return{classHourID:Object(o["v"])("campus_ClassHourID"),showEdit:!1,searchLoading:!1,dataColumns:[{Code:"content",Header:"题目",Fixed:"left"},{Code:"createTime",Slot:!0,Header:"创建时间"},{Code:"oprate",Header:"操作",Slot:!0,width:200}],dataList:[],form:{id:"",title:"",time:0},rules:{title:{required:!0,min:1,max:500,message:"长度在 1 到 500 个字符",trigger:"blur"},time:[{required:!0,message:"试卷计时不能为空"},{type:"number",message:"试卷计时必须为数字值"}]},btnLoading:!1}},created:function(){this.searchData()},methods:{searchData:function(){var e=this;this.searchLoading=!0,this.dataList=[],i["a"].IPrepareGroupSubject.DataList(this.classHourID).then((function(t){t.Result&&t.Datas&&t.Datas.length>0&&(t.Datas.forEach((function(t){e.dataList.push({id:t["PGSID"],time:t["PGSTime"],content:t["PGSContent"],createTime:t["CreateTime"],state:t["State"],classHourID:t["CHID"]})})),e.$refs["table"].MaxTblHeight=500),e.searchLoading=!1})).catch((function(){e.searchLoading=!1}))},dataEdit:function(e){this.form.id=e.id,this.form.title=e.content,this.showEdit=!0},dataSave:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return t.$message.warning("请输入正确格式"),!1;t.btnLoading=!0,i["a"].IPrepareGroupSubject.DataSave(t.form.id,t.classHourID,t.form.title,t.form.time).then((function(e){e.Result?(t.$message.success("保存成功！"),setTimeout((function(){t.searchData()}),100),t.showEdit=!1):e.Info&&t.$message.error(e.Info),t.btnLoading=!1})).catch((function(){t.btnLoading=!1}))}))},dataDrop:function(e){var t=this;this.$confirm("此操作将删除小组讨论, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.dataDelete(e)})).catch((function(){}))},dataDelete:function(e){var t=this;i["a"].IPrepareGroupSubject.DataDelete(e.id).then((function(e){e.Result?(t.$message.success("删除成功"),t.searchData()):e.Info&&t.$message.error(e.Info)})).catch((function(){t.$message.error("操作失败")}))},dataAdd:function(){this.formReset(),this.showEdit=!0},formReset:function(){this.form={id:"",title:"",time:0},this.$refs["form"]&&this.$refs["form"].resetFields()},formatDate:function(e,t){return Object(o["f"])(e,t)}}},l=r,c=a("2877"),u=Object(c["a"])(l,n,s,!1,null,"7388998a",null);t["default"]=u.exports},7675:function(e,t,a){},"796a":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"screen_question"},[a("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.dataLoading,expression:"dataLoading"}],attrs:{gutter:20}},e._l(e.dataList,(function(t,n){return a("el-col",{key:n,attrs:{span:6}},[a("div",{staticClass:"question_item",on:{click:function(a){return e.initDialog(t["Type"])}}},[a("div",[e._v("【"+e._s(t.name)+"】")]),a("div",{staticClass:"card_line"},[a("span",[e._v(" 题数："+e._s(t["Total"]))])])])])})),1),a("el-dialog",{attrs:{title:"截屏提问列表",visible:e.dialogVisible,"close-on-click-modal":!1,"modal-append-to-body":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.selectTypeChange},model:{value:e.selectType,callback:function(t){e.selectType=t},expression:"selectType"}},e._l(e.dataList,(function(t,n){return a("el-tab-pane",{key:n,attrs:{label:t.name,name:t["Type"]+""}},[a("keep-alive",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.typeDataList,"max-height":"550",stripe:"",type:"expand","default-sort":{prop:"SSSerial",order:"ascending"}}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("screen-detail",{attrs:{cpdata:e.row,subjectId:e.row["SSID"]+""}})]}}],null,!0)}),a("el-table-column",{attrs:{property:"SSSerial",label:"题号"}}),a("el-table-column",{attrs:{property:"SSPatternName",label:"模式"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.getPatternName(t.row.SSPattern)))])]}}],null,!0)}),a("el-table-column",{attrs:{property:"SSScore",label:"总分"}}),a("el-table-column",{attrs:{property:"SSTime",label:"计时(分)"}}),a("el-table-column",{attrs:{property:"CreateTime",label:"时间",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.formatDate(t.row.CreateTime,"yyyy-MM-dd hh:mm:ss")))])]}}],null,!0)}),a("el-table-column",{attrs:{property:"State",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.getStateName(t.row.State)))])]}}],null,!0)})],1)],1)],1)})),1)],1)],1)},s=[],i=(a("4160"),a("d3b7"),a("159b"),a("f3f3")),o=a("a397"),r=a("db13"),l=a("ec0b"),c={name:"ScreenQuestion",components:{ScreenDetail:function(){return a.e("chunk-46a8bd6e").then(a.bind(null,"aef7"))}},data:function(){return{courseRecordID:Object(r["v"])("campus_CourseRecordID"),courseRecord:Object(r["v"])("campus_CourseRecord"),dataList:[],dataLoading:!1,dialogVisible:!1,selectType:null,listLoading:!1,typeDataList:[]}},created:function(){this.getScreenQuestionStats()},methods:{getScreenQuestionStats:function(){var e=this;this.dataLoading=!0,this.dataList=[],o["a"].IScreenSubject.DataOptionStatistics(this.courseRecordID).then((function(t){t.Result&&t.Datas&&t.Datas.length>0&&t.Datas.forEach((function(t){e.dataList.push(Object(i["a"])(Object(i["a"])({},t),{},{name:Object(l["c"])(t["Type"])}))})),e.dataLoading=!1})).catch((function(){e.dataLoading=!1}))},initDialog:function(e){e?this.selectType=e+"":this.dataList.length>0&&(this.selectType=this.dataList[0]["Type"]+""),this.selectTypeChange(),this.dialogVisible=!0},selectTypeChange:function(){var e=this;this.listLoading=!0,this.typeDataList=[],o["a"].IScreenSubject.DataList(this.courseRecordID,this.selectType).then((function(t){t.Result&&t.Datas&&t.Datas.length>0&&t.Datas.forEach((function(t){e.typeDataList.push(t)})),e.listLoading=!1})).catch((function(){e.listLoading=!1}))},getPatternName:function(e){return Object(l["f"])(e)},formatDate:function(e,t){return Object(r["f"])(e,t)},getStateName:function(e){return Object(l["g"])(e)}}},u=c,d=(a("ed70"),a("2877")),m=Object(d["a"])(u,n,s,!1,null,"38ec9880",null);t["default"]=m.exports},"7cf2":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sckviewer"},[a("Calendar",{attrs:{ScheduledDate:e.ScheduleDate,ChooseDate:e.ChooseDate},on:{MonthChanged:e.MonthChanged,Changed:e.DateChanged,"update:ScheduledDate":function(t){e.ScheduleDate=t},"update:scheduled-date":function(t){e.ScheduleDate=t},"update:ChooseDate":function(t){e.ChooseDate=t},"update:choose-date":function(t){e.ChooseDate=t}}}),a("p",{staticClass:"title"},[e._v(e._s(e.FormatDate(e.ChooseDate))+"课表信息")]),e.schedules?a("div",{staticClass:"lists"},[a("ul",e._l(e.schedules,(function(t,n){return a("li",{key:n},[a("div",[a("span",[e._v(e._s(t.LessonClsTime))]),a("span",[e._v("~")]),a("span",[e._v(e._s(t.LessonOutTime))])]),a("div",[a("p",[a("span",[e._v(e._s(t.CSTitle))]),a("span",[e._v("第"+e._s(t.CSLesson)+"节")])]),a("p",[a("span",[e._v("教师："+e._s(t.TeacherName))])]),a("p",[a("span",[e._v("班级："+e._s(t.ClassName))])])])])})),0)]):e._e(),e.schedules?e._e():a("div",{staticClass:"none"},[a("p",[e._v(e._s(e.FormatMonthDay(e.ChooseDate))+" 无排课")])])],1)},s=[],i=(a("4160"),a("d3b7"),a("159b"),a("96cf"),a("c964")),o=a("c1df"),r=a.n(o),l=a("a397"),c={components:{Calendar:function(){return a.e("chunk-46a8bd6e").then(a.bind(null,"c192"))}},props:{},data:function(){return{ScheduleDate:[],ChooseDate:new Date,schedules:null}},mounted:function(){this.getCalendarInfo(r()(this.ChooseDate).format("YYYY-MM")+"-01",r()(this.ChooseDate).format("Y-MM")+"-"+r()(r()(this.ChooseDate).format("Y-MM"),"Y-MM").daysInMonth()),this.getTimetableInfo(r()(this.ChooseDate).format("YYYY-MM-DD"))},methods:{FormatDate:function(e){return r()(e).format("YYYY-MM-DD")},FormatMonthDay:function(e){return r()(e).format("MM-DD")},DateChanged:function(e){this.getTimetableInfo(this.FormatDate(e))},MonthChanged:function(e){this.getCalendarInfo(e[0],e[1])},getCalendarInfo:function(e,t){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var s,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=a.$parent.$route.params.id,n.next=3,l["a"].Schedule.GetScheduleIntimeByClsID(s,e,t);case 3:i=n.sent,a.ScheduleDate=[],i.Datas&&i.Datas.length>0&&i.Datas.forEach((function(e){a.ScheduleDate.push(e.CSDate)}));case 6:case"end":return n.stop()}}),n)})))()},getTimetableInfo:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=t.$parent.$route.params.id,t.schedules=[],a.next=4,l["a"].Schedule.GetScheduleTheDayByClsID(n,e);case 4:s=a.sent,s.Datas&&s.Datas.length>0?s.Datas.forEach((function(e){var a=e.ClassInfo?JSON.parse(e.ClassInfo):null,n="";a&&a.length>0&&(a.forEach((function(e){n+=e.ClassName+"、"})),n=n.substring(0,n.length-1));var s=e.ThcInfo?JSON.parse(e.ThcInfo):null,i="";s&&s.length>0&&(s.forEach((function(e){i+=e.TeacherName+"、"})),i=i.substring(0,i.length-1)),t.schedules.push({LessonClsTime:e.LessonClsTime,LessonOutTime:e.LessonOutTime,CSTitle:e.ScheduleInfo.CSTitle,CSLesson:e.ScheduleInfo.CSLesson,TeacherName:i,ClassName:n})})):t.schedules=null;case 6:case"end":return a.stop()}}),a)})))()}}},u=c,d=(a("9542"),a("2877")),m=Object(d["a"])(u,n,s,!1,null,null,null);t["default"]=m.exports},9542:function(e,t,a){"use strict";a("7675")},"9a50":function(e,t,a){},ad90:function(e,t,a){"use strict";a("daf8")},adc4:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tooltip",{attrs:{content:"输入班级关键字可以进行模糊筛选",placement:e.TooltipPlacement}},[a("el-select",{attrs:{"popper-class":"selClass",filterable:"","allow-create":e.ArrowCreate,multiple:e.multiple,placeholder:e.placeholder,"collapse-tags":"",remote:"",size:e.size,clearable:"","remote-method":e.remoteMethod,"reserve-keyword":"",loading:e.loading},on:{change:e.ChangeHandle},model:{value:e.Value,callback:function(t){e.Value=t},expression:"Value"}},e._l(e.Datas,(function(t){return a("el-option",{key:t.ClassID,attrs:{label:t.ClassName,value:t.ClassID}},[a("span",[e._v(e._s(t.ClassName))]),a("span",[e._v(e._s(t.StuCount)+"人")]),""!==t.CSID&&t.CSID!==e.ExCSID?a("span",[e._v("已排课")]):e._e()])})),1)],1)},s=[],i=(a("7db0"),a("4160"),a("c975"),a("fb6a"),a("4d63"),a("ac1f"),a("25f0"),a("5319"),a("159b"),a("96cf"),a("c964")),o=a("a397"),r=a("c1df"),l=a.n(r),c={props:{size:{type:String,default:"mini"},ArrowCreate:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},ScheduleDate:{},TooltipPlacement:{type:String,default:"right"},ExCSID:{type:String,default:""},ScheduleLesson:{},value:{},placeholder:{type:String,default:"请输入关键词"}},watch:{value:function(e,t){this.Value=e,e!==t&&(this.multiple?JSON.stringify(e)!==JSON.stringify(t)&&this.ReVerify():this.LoadData())},ScheduleDate:function(e,t){e!==t&&this.ReVerify()},ScheduleLesson:function(e,t){e!==t&&this.ReVerify()}},data:function(){return{loading:!1,Value:this.value,Datas:[]}},mounted:function(){this.LoadData()},methods:{ChangeHandle:function(e){var t=this;if(this.$emit("update:value",this.Value),this.Value&&this.multiple){var a="";this.Value.forEach((function(e,n){a+=e,n<t.Value.length-1&&(a+=",")})),this.$emit("Filter",a)}var n="";if(this.multiple){var s=[];this.Value.forEach((function(e){var a=t.Datas.find((function(t){return t.ClassID===e}));a?s.push("".concat(a.ClassName)):s.push(e)})),n=JSON.stringify(s);var i=new RegExp('"',"g");n=n.slice(1,n.length-1).replace(i,"")}else{var o=this.Datas.find((function(t){return t.ClassID===e}));n=o?"".concat(o.ClassName):this.Value}this.$emit("update:text",n)},remoteMethod:function(e){""!==e?(this.loading=!0,this.LoadData(e)):this.Datas=[]},ReVerify:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.loading=!0,!(e.Value&&e.Value.length>0)){t.next=8;break}return e.Value=[],t.next=5,o["a"].Class.GetDataByName("",l()(e.ScheduleDate).format("YYYY-MM-DD"),e.ScheduleLesson,JSON.stringify(e.value));case 5:a=t.sent,a&&(a.Datas.forEach((function(t){e.$set(t,"disabled",!(""===t.CSID||t.CSID===e.ExCSID)),""!==t.CSID&&t.CSID!==e.ExCSID||e.Value.push(t.ClassID)})),e.Datas=a.Datas,e.ArrowCreate&&e.value.forEach((function(t){e.Value.indexOf(t)<0&&e.Value.push(t)})),e.$emit("update:value",e.Value)),e.loading=!1;case 8:case"end":return t.stop()}}),t)})))()},LoadData:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,o["a"].Class.GetDataByName(e,l()(t.ScheduleDate).format("YYYY-MM-DD"),t.ScheduleLesson,t.multiple?JSON.stringify(t.value):'["'.concat(t.value,'"]'));case 2:n=a.sent,n&&(n.Datas.forEach((function(e){t.$set(e,"disabled",!(""===e.CSID||e.CSID===t.ExCSID))})),t.Datas=n.Datas),t.loading=!1;case 5:case"end":return a.stop()}}),a)})))()}}},u=c,d=a("2877"),m=Object(d["a"])(u,n,s,!1,null,null,null);t["default"]=m.exports},b4a7:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Table",{ref:"table",attrs:{ShowTopBar:!1,ShowTblFoot:!1,ShowSelectColumn:!1,ShowExport:!1,Columns:e.tableColumns,Datas:e.dataList,Loading:e.dataLoading,showMaxeight:!1},on:{"update:Datas":function(t){e.dataList=t},"update:datas":function(t){e.dataList=t}},scopedSlots:e._u([{key:"oprate",fn:function(t){return[a("el-button",{attrs:{type:"warning",icon:"el-icon-view",size:"mini"},on:{click:function(a){return e.getPracticeDetail(t.row)}}},[e._v("查看答题")])]}}])}),a("el-dialog",{staticClass:"cp_detail",attrs:{title:"答题明细",visible:e.dialogDetailVisible,"close-on-click-modal":!1,"modal-append-to-body":!1},on:{"update:visible":function(t){e.dialogDetailVisible=t}}},[e._l(e.cpDetail,(function(t,n){return a("div",{key:n,staticClass:"mb"},[a("div",{staticClass:"mb"},[e._v(e._s(t.PSData.PSSerial)+". ["+e._s(e.fetchPSType(t.PSData.PSType))+"] "+e._s(t.PSData.PSScore)+"分")]),a("div",{staticClass:"mb"},[e._v(e._s(t.PSData.PSContent))]),1===t.PSData.PSType||2===t.PSData.PSType?a("div",{staticClass:"mb"},e._l(t.SOData,(function(t,n){return a("div",{key:n,attrs:{item:t}},[e._v(" "+e._s(t.SOSerial)+". "+e._s(t.SOContent)+" ")])})),0):e._e(),a("div",{staticClass:"mb"},[e._v(" 答案： "),a("span",{staticClass:"primary"},[e._v(e._s(t.PSData.PSAnswer))])]),a("div",{staticClass:"mb"},[e._v(" 解析： "),a("span",{staticClass:"danger"},[e._v(e._s(t.PSData.PSanalysis))])]),a("div",{staticClass:"part_title"},[e._v("我的答题")]),a("div",{domProps:{innerHTML:e._s(t.PAData)}})])})),a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialogDetailVisible=!1}}},[e._v("关闭")])],1)],2)],1)},s=[],i=(a("4160"),a("d3b7"),a("ac1f"),a("5319"),a("1276"),a("159b"),a("96cf"),a("c964")),o=a("a397"),r=a("67dc"),l=a("db13"),c=a("ec0b"),u={name:"ClassPractice",components:{Table:function(){return a.e("chunk-347ed62b").then(a.bind(null,"0748"))}},data:function(){return{courseRecordID:Object(l["v"])("campus_CourseRecordID"),courseRecord:Object(l["v"])("campus_CourseRecord"),dataList:[],dataLoading:!1,tableColumns:[{Code:"CPTitle",Header:"名称",width:300},{Code:"SubjectTotal",Header:"题数"},{Code:"SubjectScore",Header:"总分"},{Code:"oprate",Header:"操作",Slot:!0,width:150}],dialogDetailVisible:!1,cpDetail:[]}},created:function(){this.getClassPracticeStats()},methods:{getClassPracticeStats:function(){var e=this;this.dataLoading=!0,this.dataList=[],o["a"].IClassPractise.dataStatistics(this.courseRecordID).then((function(t){t.Result&&t.Datas&&t.Datas.length>0&&t.Datas.forEach((function(t){e.dataList.push({CIPID:t["CIPID"],CPID:t.Key.CPID,PLID:t.Key.PLID,CPTitle:t.PLTitle,SubjectTotal:t.Total,SubjectScore:t.Score,CreateTime:t.Key.CreateTime,State:t.Key.State})})),e.dataLoading=!1})).catch((function(){e.dataLoading=!1}))},getPracticeDetail:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.cpDetail=[],n=r["a"].GetStudentInfo(),t.dialogDetailVisible=!0,s=t.$root.PictureURL,o["a"].IClassPractise.PractiseAnswerList(e.CIPID,n?n.StudentID:"").then((function(e){e.Result&&e.Datas&&e.Datas.length>0&&e.Datas.forEach((function(e){var a="未作答";if(null!=e.PAData){var n=e.PAData.PAContent;a=n.replace(/<img [^>]*src=['"]([^'"]+)[^>]*>/gi,(function(e,t){var a=t.split("/")[1];return'<img src="'+s+"?filename="+a+'&fileType=7" alt="" style="max-width:380px"/>'}))}t.cpDetail.push({PSData:e.PSData,PAData:a,SOData:e.SOList})}))})).catch((function(){}));case 5:case"end":return a.stop()}}),a)})))()},fetchPSType:function(e){return Object(c["c"])(e)}}},d=u,m=(a("3e08"),a("2877")),f=Object(m["a"])(d,n,s,!1,null,null,null);t["default"]=f.exports},bc7a:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"filter"},[a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:e.ChangeExpand}},[e._v(" "+e._s(e.expand?"收起":"展开")+"筛选 "),e.expand?a("i",{staticClass:"el-icon-arrow-up"}):a("i",{staticClass:"el-icon-arrow-down"})]),e.expand?a("div",e._l(e.FilterItems,(function(t,n){return a("el-card",{key:n,attrs:{shadow:"hover"}},[a("div",[t.Multiple&&"ClsRoom"!==t.Type?a("el-checkbox",{attrs:{indeterminate:t.indeterminate},on:{change:function(a){return e.ALLCheckChange(a,t)}},model:{value:t.checkedALL,callback:function(a){e.$set(t,"checkedALL",a)},expression:"item.checkedALL"}},[e._v(e._s(t.TypeName))]):a("span",[e._v(e._s(t.TypeName))])],1),a("div",{ref:"divOptions"+n,refInFor:!0,class:{more:e.showMore===t.Type}},["Date-TimeRange"===t.Type?a("div",[a("DTRange",{attrs:{value:t.Values,NotEralier:t.NotEarlier},on:{"update:value":function(a){return e.$set(t,"Values",a)},change:function(a){return e.DTRangeChange(a,t)},"update:NotEralier":function(a){return e.$set(t,"NotEarlier",a)},"update:not-eralier":function(a){return e.$set(t,"NotEarlier",a)}}})],1):e._e(),"ClsRoom"===t.Type?a("Room",{attrs:{value:t.Values,Level:t.Level,multiple:t.Multiple},on:{Filter:function(a){return e.RoomChange(a,t)}}}):e._e(),"ClsRoom"===t.Type&&t.Floors?a("el-checkbox-group",{attrs:{size:"mini"},on:{change:function(a){return e.FloorsChange(a,t)}},model:{value:t.Floors,callback:function(a){e.$set(t,"Floors",a)},expression:"item.Floors"}},e._l(e.Floors,(function(t){return a("el-checkbox-button",{key:t,attrs:{label:t}},[e._v(e._s(t)+"层")])})),1):e._e(),t.Multiple?a("el-checkbox-group",{attrs:{size:"mini"},on:{change:function(a){return e.ValueChange(a,t)}},model:{value:t.Values,callback:function(a){e.$set(t,"Values",a)},expression:"item.Values"}},e._l(t.Options,(function(t,n){return a("el-checkbox-button",{key:n,attrs:{label:t.ID}},[e._v(e._s(t.Label))])})),1):a("el-radio-group",{attrs:{size:"mini"},on:{change:function(a){return e.ValueChange(a,t)}},model:{value:t.Values,callback:function(a){e.$set(t,"Values",a)},expression:"item.Values"}},e._l(t.Options,(function(t,n){return a("el-radio-button",{key:n,attrs:{label:t.ID}},[e._v(e._s(t.Label))])})),1)],1),a("el-checkbox-group",{directives:[{name:"show",rawName:"v-show",value:t.ShowEx,expression:"item.ShowEx"}],attrs:{size:"mini"},on:{change:function(a){return e.ChangeEx(a,t)}},model:{value:t.ExOptions,callback:function(a){e.$set(t,"ExOptions",a)},expression:"item.ExOptions"}},[a("el-checkbox-button",{attrs:{label:"more"}},[e._v("更多")])],1)],1)})),1):e._e()],1)},s=[],i=(a("4160"),a("c975"),a("d3b7"),a("159b"),a("96cf"),a("c964")),o=a("a397"),r=a("c1df"),l=a.n(r),c={components:{Room:function(){return a.e("chunk-46a8bd6e").then(a.bind(null,"88ce"))},DTRange:function(){return a.e("chunk-1c2c935c").then(a.bind(null,"f03f"))}},props:{FilterItems:{type:Array,default:function(){return[]}},Expand:{type:Boolean,default:!0}},data:function(){return{Floors:[],expand:this.Expand,showMore:"",datepickerOptions_NotEralier:{firstDayOfWeek:this.FirstDayOfWeek,disabledDate:function(e){return e.getTime()<l()(Date.now()).add(-1,"days")}},datepickerOptions:{firstDayOfWeek:this.FirstDayOfWeek}}},created:function(){var e=this;this.FilterItems.forEach(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(a){var n,s,i,r,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$set(a,"ExOptions",[]),e.$set(a,"indeterminate",!1),e.$set(a,"checkedALL",!1),e.$set(a,"ShowEx",!1),n=[],s=[],i=!1,a.Values&&(i=!0,s=a.Values),t.t0=a.Type,t.next="ClsRoomType"===t.t0?11:"DeviceType"===t.t0?17:"RoomSeats"===t.t0?19:"Date-TimeRange"===t.t0?24:27;break;case 11:return e.$set(a,"TypeName","教室类型"),t.next=14,o["a"].ClsRoom.GetClsRoomTypes();case 14:return r=t.sent,r&&(a.Multiple||(n.push({ID:null,Label:"不限"}),i||(s=null)),r.Datas&&r.Datas.forEach((function(e){n.push({ID:e.MetadataCode,Label:e.MetadataName})}))),t.abrupt("break",27);case 17:return n.push({ID:1,Label:"智能终端"},{ID:2,Label:"PC"},{ID:3,Label:"IP电话"},{ID:4,Label:"摄像头"},{ID:5,Label:"课件编码器"},{ID:7,Label:"IC卡读卡器"},{ID:9,Label:"录播主机"},{ID:11,Label:"投影仪"},{ID:[8,20,21,22,23,24,30,40,41,42,43,44,45,46,47,48],Label:"物联网设备"}),t.abrupt("break",27);case 19:for(e.$set(a,"TypeName","教室座位数"),n.push({ID:0,Label:"不限"}),c=30;c<=140;c+=10)n.push({ID:c,Label:"".concat(c,"席")});return s=0,t.abrupt("break",27);case 24:return s.push(new Date),s.push([new Date,l()(new Date).add(1,"hours")]),t.abrupt("break",27);case 27:e.$set(a,"Options",n),e.$set(a,"Values",s);case 29:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$nextTick((function(){e.$emit("Loaded")})),t.next=3,o["a"].ClsRoom.GetFloorByCampusBuilding();case 3:a=t.sent,a&&(e.Floors=a.Datas);case 5:case"end":return t.stop()}}),t)})))()},updated:function(){var e=this;this.$nextTick((function(){e.AdjustShowEx()}))},methods:{RoomChange:function(e,t){this.$emit("Filter",t.Type,e,t.Floors)},DTRangeChange:function(e,t){this.$emit("Filter",t.Type)},ValueChange:function(e,t){t.Multiple&&(e&&e.length>0?(t.checkedALL=!0,e.length===t.Options.length?t.indeterminate=!1:t.indeterminate=!0):(t.indeterminate=!1,t.checkedALL=!1)),this.$emit("Filter",t.Type,e)},FloorsChange:function(e,t){this.$emit("Filter","ClsRoom-Floors",e)},ALLCheckChange:function(e,t){if(e){var a=[];t.Options.forEach((function(e){a.push(e.ID)})),t.Values=a}else t.Values=[];t.indeterminate=!1,t.checkedALL=e,this.$emit("Filter",t.Type,t.Values)},ChangeEx:function(e,t){var a=this;this.FilterItems.forEach((function(e){e.Type!==t.Type&&(e.ExOptions=[])})),t.ShowMore=e.indexOf("more")>=0,e.indexOf("more")>=0?this.showMore=t.Type:this.showMore="",this.$nextTick((function(){a.$emit("ReSize")}))},ChangeExpand:function(){var e=this;this.expand=!this.expand,this.$nextTick((function(){e.$emit("ReSize")}))},AdjustShowEx:function(){var e=this;this.expand&&this.FilterItems.forEach((function(t,a){var n=e.$refs["divOptions".concat(a)][0],s=n.children[0],i=parseInt(window.getComputedStyle(n).height),o=parseInt(window.getComputedStyle(s).height);o>i&&(t.ShowEx=!0)}))}}},u=c,d=(a("400f"),a("2877")),m=Object(d["a"])(u,n,s,!1,null,null,null);t["default"]=m.exports},c8d2:function(e,t,a){var n=a("d039"),s=a("5899"),i="​᠎";e.exports=function(e){return n((function(){return!!s[e]()||i[e]()!=i||s[e].name!==e}))}},daf8:function(e,t,a){},dbb8:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"scene"},[a("div",{staticClass:"sceneList"},[e._l(e.scenes,(function(t,n){return a("div",{key:n,staticClass:"stritem",class:{selection:e.selIndex===n},on:{click:function(a){return e.selection(t,n)}}},[a("i",{staticClass:"iconfont",class:e.icons[t.icon]}),a("span",[e._v(e._s(t.name))])])})),a("div",{staticClass:"increase",on:{click:function(t){return e.increase()}}},[a("i",{staticClass:"iconfont icon_plus"}),a("span",[e._v("新增")])])],2),a("p",[e._v("情景修改")]),a("div",{staticClass:"sceneForm"},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,size:"mini","label-width":"90px"}},[a("el-row",{attrs:{gutter:5}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"情景名称:",prop:"name"}},[a("el-input",{attrs:{minlength:"2",maxlength:"20",clearable:"","show-word-limit":""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-popover",{attrs:{placement:"top",width:"210",trigger:"hover"}},[e._l(e.icons,(function(t,n){return a("span",{key:n,staticClass:"custom-iconlist",on:{click:function(t){return e.selectIcon(n)}}},[a("i",{staticClass:"iconfont",class:t})])})),a("div",{staticClass:"scene-custom-icon",attrs:{slot:"reference"},slot:"reference"},[a("i",{staticClass:"iconfont",class:e.icons[e.sceneIcon]})])],2)],1)],1)],1)],1),a("div",{staticClass:"scene_actionSet"},[a("ActionSet",{ref:"ActionSet",attrs:{clsRoomID:e.roomID}})],1),a("p",[a("el-button-group",[e.isAdd?a("el-button",{staticClass:"add",attrs:{type:"primary",icon:"el-icon-circle-plus-outline",size:"mini"},on:{click:e.save}},[e._v("新增")]):e._e(),e.isAdd?e._e():a("el-button",{staticClass:"update",attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:e.save}},[e._v("更新")]),e.isAdd?e._e():a("el-button",{staticClass:"delete",attrs:{type:"danger",icon:"el-icon-close",size:"mini"},on:{click:e.handleDelete}},[e._v("删除")])],1)],1)])},s=[],i=(a("4160"),a("b0c0"),a("d3b7"),a("159b"),a("96cf"),a("c964")),o=a("a397"),r={components:{ActionSet:function(){return a.e("chunk-2c8a7b59").then(a.bind(null,"3243"))}},props:{clsRoomID:{type:String,default:null}},watch:{clsRoomID:function(e,t){var a=this;e&&setTimeout((function(){a.roomID=e,a.init()}),200)}},data:function(){return{scenes:[],isAdd:!0,selIndex:-1,form:{name:""},rules:{name:[{required:!0,message:"请选择输入名称",trigger:"blur"}]},sceneIcon:0,fixID:"",fixType:"",roomID:"",icons:["icon_AttendCls","icon_xiakedianji","icon_Projector","icon_selfstudy","icon_xiuxishi","icon_code","icon_hot","icon_taolun","icon_heiban","icon_split_Custom"]}},methods:{init:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.selIndex=-1,e.isAdd=!0,e.scenes=[],t.next=5,o["a"].IOT.GetRHSceneByCondition(e.roomID);case 5:a=t.sent,a.Datas&&a.Datas.length>0&&a.Datas.forEach((function(t){t.ClsRoomID===e.roomID&&t.Scenes&&t.Scenes.length>0&&(n=JSON.parse(t.Scenes),n.forEach((function(t){e.scenes.push({state:0,type:t.SceneType,icon:t.SceneIcon-1,name:t.SceneName,id:t.SceneID})})))}));case 7:case"end":return t.stop()}}),t)})))()},selection:function(e,t){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var s,i,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a.selIndex=t,a.isAdd=!1,n.next=4,o["a"].IOT.GetSceneByType(e.id);case 4:s=n.sent,s.Result&&(a.fixID=e.id,a.fixType=e.type,a.form.name=e.name,a.sceneIcon=e.icon,s.Datas&&s.Datas.length>0&&(i=[],s.Datas.forEach((function(t){t.SceneID===e.id&&(r=JSON.parse(t.ActionContent),i.push({type:parseInt(r.type),devName:r.devName,serialID:r.serialID,action:parseInt(r.action),eq:parseInt(r.eq),eqName:r.eqName,w:parseInt(r.w),y:parseInt(r.y),vpid:r.vpid,b0:parseInt(r.b0),b6:parseInt(r.b6),panelName:r.panelName,panelType:parseInt(r.panelType),actionName:r.actionName,index:parseInt(r.index),code:r.code,time:parseInt(r.time)}),a.$refs.ActionSet.actions=i)}))));case 6:case"end":return n.stop()}}),n)})))()},increase:function(){this.selIndex=-1,this.isAdd=!0,this.emptyForm()},selectIcon:function(e){this.sceneIcon=e},emptyForm:function(){this.fixID="",this.fixType="",this.form.name="",this.sceneIcon=0,this.$refs.ActionSet.actions=[]},save:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.form.validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(a){var n,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=12;break}if(n=e.$refs.ActionSet.actions,!(n.length>0&&""!==e.sceneName)){t.next=11;break}return n.forEach((function(e,t){e.index=t})),e.isAdd&&(s=0,e.scenes.forEach((function(e){e.type>s&&(s=e.type)})),e.fixType=++s),t.next=7,o["a"].IOT.SaveScene(e.roomID,e.form.name,e.fixType,e.sceneIcon+1,JSON.stringify(n));case 7:i=t.sent,i.Result&&(e.init(),e.emptyForm(),e.$emit("getScene",e.roomID)),t.next=12;break;case 11:e.$message({message:"请添加动作集",type:"warning"});case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},handleDelete:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o["a"].IOT.DeleteScene(e.fixID,e.roomID,parseInt(e.fixType));case 2:a=t.sent,a.type&&e.$message({message:a.message,type:a.type}),e.init(),e.emptyForm(),e.$emit("getScene",e.roomID);case 7:case"end":return t.stop()}}),t)})))()}}},l=r,c=(a("672a"),a("2877")),u=Object(c["a"])(l,n,s,!1,null,null,null);t["default"]=u.exports},ea3b:function(e,t,a){},eced:function(e,t,a){},ed70:function(e,t,a){"use strict";a("525f")},edd9:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hv-tree"},[a("div",{staticClass:"box"},e._l(e.scoreTrees,(function(t,n){return a("div",{key:n,staticClass:"first-node",class:e.Edit?"node-edit":"node-view"},[a("div",{staticClass:"first-node-head",on:{click:function(a){return e.toggleSpread(t)}}},[a("span",{staticClass:"title-name"},[e._v(e._s(t.GaugeName)+"（分值"+e._s(Number(t.GIScore))+"分）")]),a("div",[!e.Edit&&e.only?a("span",{staticClass:"sub-total"},[e._v("总得分："+e._s(Number(t.GSScore))+"分")]):e._e(),a("i",{staticClass:"el-icon-arrow-up",class:{"el-icon-arrow-down":t.isFold,"el-icon-arrow-up":!t.isFold}})])]),a("el-collapse-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.isFold,expression:"!item.isFold"}],staticClass:"hv-container"},[e._l(t.children,(function(t,n){return a("div",{key:n,staticClass:"second-node"},[a("div",{staticClass:"content"},[e._v(" "+e._s(t.GIContent)+" ")]),a("div",{staticClass:"score"},[e.Edit?[a("span",[e._v("分值："+e._s(Number(t.GIScore)))]),a("el-input-number",{attrs:{min:0,max:t.GIScore,size:"mini"},model:{value:t.GSScore,callback:function(a){e.$set(t,"GSScore",a)},expression:"sub.GSScore"}})]:[a("span",[e._v("分值："+e._s(Number(t.GIScore))+"分")]),a("div",{staticClass:"gs-score"},[e._v("得分："+e._s(Number(t.GSScore))+"分")])]],2)])})),!e.Edit&&t.GSDesc?a("div",{staticClass:"item-desc-view"},[a("span",[e._v("评语：")]),a("span",{staticClass:"desc"},[e._v(e._s(t.GSDesc))])]):e._e(),e.Edit?a("div",{staticClass:"item-desc"},[t.needDesc?e._e():a("div",{staticClass:"desc-title",on:{click:function(t){return e.ShowAdd(e.scoreTrees,n)}}},[e._v("添加评论")]),t.needDesc?a("el-input",{staticClass:"scale-area",attrs:{type:"textarea",rows:"4",placeholder:"有什么要点评的吗？"},model:{value:t.GSDesc,callback:function(a){e.$set(t,"GSDesc",a)},expression:"item.GSDesc"}}):e._e()],1):e._e()],2)])],1)})),0)])},s=[],i=(a("a434"),{props:{trees:{type:Array,default:function(){return[]}},Edit:{type:Boolean,default:!1},only:{type:Boolean,default:!0}},computed:{scoreTrees:{get:function(){return this.trees},set:function(e){this.$emit("update:trees",e)}}},methods:{toggleSpread:function(e){this.$set(e,"isFold",!e.isFold)},ShowAdd:function(e,t){var a=e[t];a.needDesc=!0,e.splice(t,1,a)}}}),o=i,r=(a("639c"),a("2877")),l=Object(r["a"])(o,n,s,!1,null,null,null);t["default"]=l.exports},f388:function(e,t,a){"use strict";a("21cd")}}]);
//# sourceMappingURL=chunk-6446bb53.202312271831.04dd9187.js.map