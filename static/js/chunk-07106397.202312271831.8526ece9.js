(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-07106397"],{"0acb":function(e,t,a){"use strict";a("4bff")},"1dd4":function(e,t,a){"use strict";a("3d7b")},"37e5":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-transfer",{directives:[{name:"loading",rawName:"v-loading",value:e.LoadingDatas,expression:"LoadingDatas"}],ref:"transfer",attrs:{id:"myTransfer","element-loading-text":"数据正在加载中",titles:["未添加","已添加"],filterable:"","target-order":"push","filter-placeholder":e.placeholder,data:e.datas},on:{change:e.Changed},model:{value:e.curDatas,callback:function(t){e.curDatas=t},expression:"curDatas"}},[a("template",{slot:"left-footer"},[a("el-input",{ref:"txtFilter",staticClass:"el-transfer-panel__filter",attrs:{placeholder:"请输入内容",clearable:""},on:{input:e.FilterInput,clear:e.DoFilter},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.DoFilter},slot:"append"})],1),a("el-pagination",{attrs:{"current-page":e.PIndex,"page-size":e.PageSize,total:e.TotalCounts,"pager-count":5,layout:"total, prev, pager, next"},on:{"update:currentPage":function(t){e.PIndex=t},"update:current-page":function(t){e.PIndex=t},"update:pageSize":function(t){e.PageSize=t},"update:page-size":function(t){e.PageSize=t},"current-change":e.PageChanged}})],1)],2)},o=[],s=(a("4de4"),a("7db0"),a("c740"),a("4160"),a("c975"),a("a434"),a("a9e3"),a("159b"),a("1157")),r=a.n(s),i={props:{placeholder:{type:String,default:"请输入查询关键字"},ALLDatas:{type:Array,default:function(){return[]}},SelectedDatas:{type:Array,default:function(){return[]}},LoadingDatas:{type:Boolean,default:!1},PageIndex:{type:Number,default:1},PageSize:{type:Number,default:50},TotalCounts:{type:Number,default:0},QueryValue:{type:String,default:""}},watch:{PageIndex:function(e,t){this.PIndex=e},ALLDatas:function(e,t){var a=this;this.datas=[],e.forEach((function(e){var t=a.datas.find((function(t){return t.id===e.id}));t||a.datas.push(e)})),this.compareSelected(this.SelectedDatas),this.$emit("update:value",this.curDatas)},SelectedDatas:function(e,t){this.curDatas=[],this.compareSelected(e),this.$emit("update:value",this.curDatas)}},data:function(){return{PIndex:this.PageIndex,datas:[],curDatas:[],filter:""}},mounted:function(){var e=this;this.$nextTick((function(){r()(e.$refs.transfer.$refs.leftPanel.$children[1].$el).replaceWith(r()(e.$refs.txtFilter.$el))}))},methods:{PageChanged:function(e){this.$emit("update:PageIndex",e),this.$emit("PageChanged")},Changed:function(e,t,a){var n=this;"right"===t?a.forEach((function(e){var t=n.ALLDatas.find((function(t){return t.id===e}));t&&n.SelectedDatas.push(t)})):a.forEach((function(e){var t=n.SelectedDatas.findIndex((function(t){return t.id===e}));n.SelectedDatas.splice(t,1)})),this.$emit("update:SelectedDatas",this.SelectedDatas),this.$emit("update:value",e)},compareSelected:function(e){var t=this;this.curDatas=[],e.forEach((function(e){var a=t.ALLDatas.find((function(t){return t.id===e.id}));a||t.ALLDatas.push(e),t.curDatas.indexOf(e.id)<0&&t.curDatas.push(e.id)}))},FilterInput:function(e){this.$emit("update:QueryValue",e)},DoFilter:function(){this.$emit("DoFilter",this.filter)}}},l=i,c=(a("cd23"),a("2877")),u=Object(c["a"])(l,n,o,!1,null,null,null);t["default"]=u.exports},"39f7":function(e,t,a){},"3d7b":function(e,t,a){},4915:function(e,t,a){"use strict";a("39f7")},"4bff":function(e,t,a){},5923:function(e,t,a){},"681c":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-select",{attrs:{filterable:"",placeholder:e.Placeholder},on:{change:e.ChangeHandle},model:{value:e.Value,callback:function(t){e.Value=t},expression:"Value"}},e._l(e.Datas,(function(e){return a("el-option",{key:e.NationalityCode,attrs:{label:e.NationalityShortName+"（"+e.NationalityCode+"）",value:e.NationalityCode}})})),1)},o=[],s=(a("96cf"),a("c964")),r=a("a397"),i={props:{value:{type:String,default:""},Placeholder:{type:String,default:"请选择"}},watch:{value:function(e,t){this.Value=this.value,e!==t&&this.LoadData()}},data:function(){return{Value:this.value,Datas:[]}},mounted:function(){this.LoadData()},methods:{ChangeHandle:function(){this.$emit("update:value",this.Value)},LoadData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r["a"].Nat.GetDatas("",1,65535);case 2:a=t.sent,a&&(e.Datas=a.Datas);case 4:case"end":return t.stop()}}),t)})))()}}},l=i,c=a("2877"),u=Object(c["a"])(l,n,o,!1,null,null,null);t["default"]=u.exports},"6e3b":function(e,t,a){},8928:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sckviewer"},[a("Calendar",{attrs:{ScheduledDate:e.ScheduleDate,ChooseDate:e.ChooseDate},on:{MonthChanged:e.MonthChanged,Changed:e.DateChanged,"update:ScheduledDate":function(t){e.ScheduleDate=t},"update:scheduled-date":function(t){e.ScheduleDate=t},"update:ChooseDate":function(t){e.ChooseDate=t},"update:choose-date":function(t){e.ChooseDate=t}}}),a("p",{staticClass:"title"},[e._v(e._s(e.FormatDate(e.ChooseDate))+"教室预约")]),e.appts?a("div",{staticClass:"lists"},[a("ul",e._l(e.appts,(function(t,n){return a("li",{key:n},[a("div",[a("span",[e._v(e._s(e.FormatTime(t.CRAStart)))]),a("span",[e._v("~")]),a("span",[e._v(e._s(e.FormatTime(t.CRAEnd)))])]),a("div",[a("p",[a("span",[e._v("预约教师："+e._s(t.CRAUserName))]),-2===t.CRAEstate?a("span",{staticClass:"red"},[e._v("删除")]):e._e(),-1===t.CRAEstate?a("span",{staticClass:"green"},[e._v("审核不通过")]):e._e(),0===t.CRAEstate?a("span",{staticClass:"blue"},[e._v("审批中")]):e._e(),1===t.CRAEstate?a("span",{staticClass:"blue"},[e._v("审核通过")]):e._e()]),a("p",[a("span",[e._v("用途："+e._s(t.CRAReason))])])])])})),0)]):e._e(),e.appts?e._e():a("div",{staticClass:"none"},[a("p",[e._v(e._s(e.FormatMonthDay(e.ChooseDate))+" 无预约")])])],1)},o=[],s=(a("4160"),a("d3b7"),a("159b"),a("96cf"),a("c964")),r=a("a397"),i=a("c1df"),l=a.n(i),c={components:{Calendar:function(){return a.e("chunk-46a8bd6e").then(a.bind(null,"c192"))}},props:{},data:function(){return{ScheduleDate:[],ChooseDate:new Date,appts:[]}},mounted:function(){var e=this.MonthHeadDate(this.ChooseDate),t=this.MonthEndDate(this.ChooseDate),a=this.DayHeadDate(this.ChooseDate),n=this.DayEndDate(this.ChooseDate);this.LoadData(e,t,a,n)},methods:{FormatDate:function(e){return l()(e).format("YYYY-MM-DD")},FormatTime:function(e){return l()(e).format("HH:mm:ss")},FormatMonthDay:function(e){return l()(e).format("MM-DD")},MonthHeadDate:function(e){return l()(e).format("YYYY-MM")+"-01 00:00:00"},MonthEndDate:function(e){return l()(e).format("Y-MM")+"-"+l()(l()(e).format("Y-MM"),"Y-MM").daysInMonth()+" 23:59:59"},DayHeadDate:function(e){return l()(e).format("YYYY-MM-DD")+" 00:00:00"},DayEndDate:function(e){return l()(e).format("YYYY-MM-DD")+" 23:59:59"},DateChanged:function(e){var t=this.MonthHeadDate(e),a=this.MonthEndDate(e),n=this.DayHeadDate(e),o=this.DayEndDate(e);this.LoadData(t,a,n,o)},LoadData:function(e,t,a,n){var o=this;return Object(s["a"])(regeneratorRuntime.mark((function s(){var i,l;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return i=o.$parent.$route.params.id,s.next=3,r["a"].ClsRoomReservation.GetClsRoomApptByDate(i,e,t,a,n);case 3:l=s.sent,o.ScheduleDate=[],o.appts=null,l.Result?(l.Dates&&l.Dates.length>0&&l.Dates.forEach((function(e){o.ScheduleDate.push(e.Time)})),l.Datas&&l.Datas.length>0&&(o.appts=[],l.Datas.forEach((function(e){o.appts.push(e)})))):o.$message({showClose:!0,message:l.Info,type:"error",duration:1e3});case 7:case"end":return s.stop()}}),s)})))()}}},u=c,f=(a("1dd4"),a("2877")),d=Object(f["a"])(u,n,o,!1,null,null,null);t["default"]=d.exports},"8a43":function(e,t,a){"use strict";a("cb54")},"91bb":function(e,t,a){"use strict";a("e1f7")},a2d2:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"player",staticClass:"player",attrs:{id:"player_"+e.Index,"element-loading-text":e.loadingText,"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.7)"},on:{click:function(t){return e.ClickHandle(t)},dblclick:e.FullScreenHandler}},[a("video",{ref:"video",attrs:{id:"video_"+e.Index,autoplay:"",muted:"",preload:"none"},domProps:{muted:!0}}),e.ClsInfo?a("div",{staticClass:"clsInfo"},[a("div",{staticClass:"schInfo",class:{show:e.showInfo}},[e.ClsInfo.ClsRoomName&&e.ShowRoomName?a("div",[e._v(" 教室："+e._s(e.ClsInfo.ClsRoomName)+" ")]):e._e(),e.ClsInfo.DeviceName?a("div",[e._v("设备："+e._s(e.ClsInfo.DeviceName))]):e._e(),e.ClsInfo.IP?a("div",[e._v("IP："+e._s(e.ClsInfo.IP))]):e._e(),e.ClsInfo.Site?a("div",[e._v(" "+e._s("2"===e.ClsInfo.Site?"老师摄像头":"1"===e.ClsInfo.Site?"学生摄像头":"课件编码器")+" ")]):e._e(),e.ClsInfo.hasCls?a("div",[e._v("讲师："+e._s(e.ClsInfo.Teachers))]):e._e(),e.ClsInfo.hasCls?a("div",[e._v("课程："+e._s(e.ClsInfo.CourseName))]):e._e(),e.ClsInfo.hasCls?a("div",[e._v("班级："+e._s(e.ClsInfo.Classes))]):e._e()]),a("div",{staticClass:"vane",on:{click:e.SwitchShowInfo}},[a("i",{staticClass:"el-icon-more"})])]):e._e(),e.ShowBusBar?a("div",{staticClass:"busBar"},[a("el-tooltip",{attrs:{content:"截图评价",placement:"top"}},[e.ShowPatrolBtn?a("i",{staticClass:"el-icon-picture",on:{click:e.PicEvaluate}}):e._e()]),a("el-tooltip",{attrs:{content:"开始录像",placement:"top"}},[e.ShowPatrolBtn?a("i",{staticClass:"el-icon-video-camera-solid",on:{click:e.RECEvaluate}}):e._e()]),a("el-tooltip",{attrs:{content:e.isFullScreen?"退出全屏":"本格全屏",placement:"top"}},[a("i",{staticClass:"iconfont",class:{icon_fullscreen:!e.isFullScreen,icon_exit_fullscreen:e.isFullScreen},on:{click:e.FullScreenHandler}})]),a("el-tooltip",{attrs:{content:"打开声音",placement:"top"}},[e.ShowMutedBtn&&!e.IsMuted?a("i",{staticClass:"iconfont icon_volume",on:{click:e.ChangeMute}}):e._e()]),a("el-tooltip",{attrs:{content:"关闭声音",placement:"top"}},[e.ShowMutedBtn&&e.IsMuted?a("i",{staticClass:"iconfont icon_mute",on:{click:e.ChangeMute}}):e._e()])],1):e._e(),a("el-dialog",{attrs:{"custom-class":"patro-eval-dlg","destroy-on-close":"",center:"",title:(1==e.formClsInfo.EvalType?"截图":2==e.formClsInfo.EvalType?"录制":"")+"评价",visible:e.dialogVisible,"close-on-click-modal":!1,"show-close":!1,"close-on-press-escape":!1,"append-to-body":"",width:"900px"},on:{"update:visible":function(t){e.dialogVisible=t},open:e.EvalDlgOpen,opened:e.EvalDlgOpened,close:e.EvalDlgClose}},[a("el-form",{ref:"formClsInfo",attrs:{"label-position":"right",rules:e.rules,model:e.formClsInfo,size:"mini",disabled:2==e.formClsInfo.EvalType&&(""==e.formClsInfo.PEID||e.formClsInfo.Recing)}},[2==e.formClsInfo.EvalType?a("div",{ref:"evalPlayer",attrs:{id:"evalPlayer"}}):e._e(),1==e.formClsInfo.EvalType?a("img",{class:"img_"+e.formClsInfo.EvalType,attrs:{src:e.dataURL}}):e._e(),a("div",{staticClass:"evalClsInfo"},[a("el-form-item",{attrs:{label:"教室：","label-width":"120px",prop:"ClsRoomName"}},[a("el-input",{model:{value:e.formClsInfo.ClsRoomName,callback:function(t){e.$set(e.formClsInfo,"ClsRoomName",t)},expression:"formClsInfo.ClsRoomName"}})],1),a("el-form-item",{attrs:{label:"授课教师：","label-width":"120px"}},[a("el-input",{model:{value:e.formClsInfo.Teachers,callback:function(t){e.$set(e.formClsInfo,"Teachers",t)},expression:"formClsInfo.Teachers"}})],1),a("el-form-item",{attrs:{label:"课程名称：","label-width":"120px"}},[a("el-input",{model:{value:e.formClsInfo.Course,callback:function(t){e.$set(e.formClsInfo,"Course",t)},expression:"formClsInfo.Course"}})],1),a("el-form-item",{attrs:{label:"上课班级：","label-width":"120px"}},[a("el-input",{model:{value:e.formClsInfo.Classes,callback:function(t){e.$set(e.formClsInfo,"Classes",t)},expression:"formClsInfo.Classes"}})],1),a("el-form-item",{attrs:{label:"上课时间：",prop:"Lesson","label-width":"120px"}},[a("el-input",{model:{value:e.formClsInfo.Lesson,callback:function(t){e.$set(e.formClsInfo,"Lesson",t)},expression:"formClsInfo.Lesson"}})],1)],1),a("div",{staticClass:"evalInfo"},[a("p",[e._v("评价内容")]),a("div",{staticClass:"evalInfoItems"},e._l(e.formClsInfo.Items,(function(t,n){return a("el-form-item",{key:t.PEType,attrs:{"label-width":"200px",label:t.TypeName+"：",prop:"Items."+n+".PEScore",rules:{required:!0,message:"请打分",trigger:"blur"}}},[a("el-input-number",{staticClass:"txtNum",attrs:{size:"small",placeholder:"请填写分值",max:100},model:{value:t.PEScore,callback:function(a){e.$set(t,"PEScore",a)},expression:"item.PEScore"}})],1)})),1),a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入评价内容"},model:{value:e.formClsInfo.Remark,callback:function(t){e.$set(e.formClsInfo,"Remark",t)},expression:"formClsInfo.Remark"}})],1)]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[2==e.formClsInfo.EvalType&&e.formClsInfo.Recing?a("span",[e._v("录制中(最长录制10分钟)")]):e._e(),a("el-button-group",[e.formClsInfo.Recing?e._e():a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),1==e.formClsInfo.EvalType?a("el-button",{attrs:{loading:e.SyncLoading,size:"mini",type:"primary"},on:{click:e.CreateEval}},[e._v("确 定")]):e._e(),2!=e.formClsInfo.EvalType||e.formClsInfo.Recing||""!=e.formClsInfo.PEID?e._e():a("el-button",{attrs:{loading:e.SyncLoading,size:"mini",type:"primary"},on:{click:e.BeginRecEval}},[e._v("开始录制")]),2==e.formClsInfo.EvalType&&e.formClsInfo.Recing&&""!=e.formClsInfo.PEID?a("el-button",{attrs:{loading:e.SyncLoading,size:"mini",type:"primary"},on:{click:e.StopRecEval}},[e._v("结束录制")]):e._e(),2!=e.formClsInfo.EvalType||e.formClsInfo.Recing||""==e.formClsInfo.PEID?e._e():a("el-button",{attrs:{loading:e.SyncLoading,size:"mini",type:"primary"},on:{click:e.SubmitRecEval}},[e._v("提交评价")])],1)],1)],1)],1)},o=[],s=(a("99af"),a("4160"),a("a9e3"),a("159b"),a("96cf"),a("c964")),r=a("a397"),i=a("93bf"),l=a.n(i),c=a("1157"),u=a.n(c),f=a("1947"),d={props:{DeviceID:{type:String,default:""},Index:{type:Number,default:1},ClsInfo:{type:Object,default:null},AlertInfo:{type:Object,default:null},ShowInfo:{type:Boolean,default:!1},ShowPatrolBtn:{type:Boolean,default:!0},ShowRoomName:{type:Boolean,default:!0},ShowMutedBtn:{type:Boolean,default:!1},ShowBusBar:{type:Boolean,default:!0},IsPatrol:{type:Boolean,default:!1}},watch:{AlertInfo:function(e,t){var a=this;e&&(this.loading=!0,this.loadingText=e.Title,setTimeout((function(){a.loading=!1,a.loadingText=""}),1e3))},DeviceID:function(e,t){e&&e!==t&&(this.IsPatrol&&this.Dispose(),console.log("watch - DeviceID",this.player),this.source="ws://".concat(this.$root.SrvConfigInfo.LiveHost,":").concat(this.$root.SrvConfigInfo.LivePort,"/Patrol/").concat(e,".flv"),!this.IsPatrol&&this.player||this.InitPlayer())},ClsInfo:function(e,t){e&&e!==t&&(this.IsPatrol&&this.Dispose(),console.log("watch - ClsInfo",this.player,this.IsPatrol),this.source="ws://".concat(this.$root.SrvConfigInfo.LiveHost,":").concat(this.$root.SrvConfigInfo.LivePort,"/Patrol/").concat(e.ID,".flv"),!this.IsPatrol&&this.player||this.InitPlayer())},ShowInfo:function(e,t){this.showInfo=e}},data:function(){return{dataURL:"",dialogVisible:!1,SyncLoading:!1,loading:!1,loadingText:"已经在这里播放了哦~",isFullScreen:!1,showInfo:this.ShowInfo,rules:{ClsRoomName:[{required:!0,message:"请输入教室名称",trigger:"blur"}]},formClsInfo:{RecTimer:null,PEID:"",Recing:!1,Polling:!1,Index:0,Classes:"",ClsRoomName:"",Teachers:"",Lesson:"",Course:"",EvalType:1,Items:[],Remark:"",EvalTime:new Date},IsMuted:!0,source:"",player:null,ClearBuffer:null,TryCount:0}},beforeDestroy:function(){this.Dispose(),console.log("beforeDestroy~释放播放器")},mounted:function(){var e=this;this.IsPatrol||this.$nextTick((function(){e.ClsInfo&&(e.source="ws://".concat(e.$root.SrvConfigInfo.LiveHost,":").concat(e.$root.SrvConfigInfo.LivePort,"/Patrol/").concat(e.DeviceID?e.DeviceID:e.ClsInfo.ID,".flv"),e.InitPlayer())})),l.a.on("change",(function(){e.isFullScreen=l.a.isFullscreen}))},methods:{ChangeMute:function(){this.IsMuted=!this.IsMuted},PicEvaluate:function(){var e=document.createElement("canvas");e.width=this.$refs.video.videoWidth,e.height=this.$refs.video.videoHeight,e.getContext("2d").drawImage(this.$refs.video,0,0,e.width,e.height);var t=e.toDataURL();this.Evaluate(1,t)},RECEvaluate:function(){this.Evaluate(2)},ClickHandle:function(e){this.$emit("click",e)},SwitchShowInfo:function(){this.showInfo=!this.showInfo},FullScreenHandler:function(){l.a.isEnabled&&l.a.toggle(this.$refs.player)},SubmitRecEval:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.SyncLoading=!0,t.next=3,r["a"].Supervisor.UpdatePartor(e.formClsInfo.PEID,e.formClsInfo.ClsRoomID,e.formClsInfo.ClsRoomName,e.formClsInfo.Teachers,e.formClsInfo.Course,e.formClsInfo.Classes,e.formClsInfo.Lesson,JSON.stringify(e.formClsInfo.Items),e.formClsInfo.Remark);case 3:a=t.sent,a.Result?e.dialogVisible=!1:e.$message({showClose:!0,message:a.message,type:a.type}),e.SyncLoading=!1;case 6:case"end":return t.stop()}}),t)})))()},StopRecEval:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.SyncLoading=!0,clearTimeout(e.formClsInfo.RecTimer),t.next=4,r["a"].Supervisor.StopRecPatorEval(e.formClsInfo.PEID,e.ClsInfo.ID);case 4:a=t.sent,a.Result?e.formClsInfo.Recing=!1:e.$message({showClose:!0,message:a.message,type:a.type}),e.SyncLoading=!1;case 7:case"end":return t.stop()}}),t)})))()},BeginRecEval:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.SyncLoading=!0,console.log(e.formClsInfo),t.next=4,r["a"].Supervisor.CreateRecPatorEval(e.formClsInfo.ClsRoomID,e.formClsInfo.ClsRoomName,e.ClsInfo.ID,e.formClsInfo.IP,e.formClsInfo.Port,e.formClsInfo.BrandCode,e.formClsInfo.ModelCode,e.formClsInfo.User,e.formClsInfo.Pwd);case 4:a=t.sent,a.Result?(e.formClsInfo.Recing=!0,e.formClsInfo.PEID=a.Datas,e.RecTimer=setTimeout(e.StopRecEval,6e5)):e.$message({showClose:!0,message:a.message,type:a.type}),e.SyncLoading=!1;case 7:case"end":return t.stop()}}),t)})))()},CreateEval:function(){var e=this;this.$refs["formClsInfo"].validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(a){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=9;break}return e.SyncLoading=!0,t.next=4,r["a"].Supervisor.CreatePartor(e.formClsInfo.EvalType,e.formClsInfo.ClsRoomID,e.formClsInfo.ClsRoomName,e.formClsInfo.Teachers,e.formClsInfo.Course,e.formClsInfo.Classes,e.formClsInfo.Lesson,JSON.stringify(e.formClsInfo.Items),e.formClsInfo.Remark,e.dataURL);case 4:n=t.sent,n.Result?e.dialogVisible=!1:e.$message({showClose:!0,message:n.message,type:n.type}),e.SyncLoading=!1,t.next=10;break;case 9:return t.abrupt("return",!1);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},EvalDlgClose:function(){this.formClsInfo.Polling&&this.StartPolling(!1),2===this.formClsInfo.EvalType&&u()(this.$refs.video).prependTo(u()(this.$refs.player))},EvalDlgOpen:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.formClsInfo.Items=[],t.next=3,r["a"].Metadata.GetMetadataByCode("ZXXKPJLX");case 3:a=t.sent,a.Result?a.Datas&&a.Datas.forEach((function(t){e.formClsInfo.Items.push({TypeName:t.MetadataName,PEType:t.MetadataCode,PEScore:10})})):e.$message({showClose:!0,message:a.message,type:a.type});case 5:case"end":return t.stop()}}),t)})))()},EvalDlgOpened:function(){return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},Evaluate:function(e,t){var a=this;this.ClsInfo.CSLesson?this.formClsInfo.Lesson="第"+this.ClsInfo.CSLesson+"节（"+this.ClsInfo.LessonClsTime+"-"+this.ClsInfo.LessonOutTime+"）":this.formClsInfo.Lesson="",this.dialogVisible=!0,this.formClsInfo.EvalType=e,this.dataURL=t,this.formClsInfo.Classes=this.ClsInfo.Classes,this.formClsInfo.Course=this.ClsInfo.CourseName,this.formClsInfo.Teachers=this.ClsInfo.Teachers,this.formClsInfo.ClsRoomName=this.ClsInfo.ClsRoomName,this.formClsInfo.ClsRoomID=this.ClsInfo.ClsRoomID,this.formClsInfo.Remark=null,this.formClsInfo.IP=this.ClsInfo.IP,this.formClsInfo.Port=this.ClsInfo.Port,this.formClsInfo.BrandCode=this.ClsInfo.BrandCode,this.formClsInfo.ModelCode=this.ClsInfo.ModelCode,this.formClsInfo.User=this.ClsInfo.User,this.formClsInfo.Pwd=this.ClsInfo.Pwd,this.formClsInfo.Items.forEach((function(e){e.PEScore=10})),2===e&&this.$nextTick((function(){u()(a.$refs.video).css("width","100%"),u()(a.$refs.video).appendTo(u()(a.$refs.evalPlayer))}))},RecError:function(e){this.dialogVisible&&this.formClsInfo.ClsRoomID===e.ClsRoomID&&this.ClsInfo.ID===e.DeviceID&&(this.formClsInfo.Recing=!1,this.formClsInfo.PEID="",this.$message({showClose:!0,message:"巡课录制失败:".concat(e.Info,"~"),type:"error",duration:2e3}))},InitPlayer:function(){var e=this;if(f["a"].isSupported()){this.player=f["a"].createPlayer({type:"flv",isLive:!0,url:this.source,duration:0},{autoCleanupSourceBuffer:!0,enableStashBuffer:!1,isLive:!0,lazyLoad:!1,lazyLoadMaxDuration:0,lazyLoadRecoverDuration:0,deferLoadAfterSourceOpen:!1,fixAudioTimestampGap:!1}),this.player.attachMediaElement(this.$refs.video);var t=this.player.load();if(t){var a=this;t.then((function(){a.Play()})).catch((function(e){console.log("加载出错了~~",e)}))}else this.Play();this.player.on("error",(function(t,a){"CodecUnsupported"!==a&&"HttpStatusCodeInvalid"!==a?(console.log(t,a),e.Dispose(),e.InitPlayer()):"NetworkError"===t&&e.TryCount<3&&setTimeout((function(){e.TryCount++,console.log("错误了尝试第".concat(e.TryCount,"次"),t,a),e.Dispose(),e.InitPlayer()}),1e3)})),this.player.on("loading_complete",(function(){console.log("加载完成"),e.Dispose(),e.InitPlayer()})),this.ClearBuffer=setInterval((function(){if(e.player){if(!e.player.buffered.length)return;var t=e.player.buffered.end(0),a=t-e.player.currentTime;a>=1.5&&(e.player.currentTime=t-.1)}}),3e4)}},Pause:function(){this.player.pause()},Play:function(){var e=this,t=this.player.play();t&&t.then((function(){})).catch((function(t){setTimeout((function(){e.Play()}),2e3),console.log("亲，你这操作有点太快了~~ 浏览器受不鸟了哦~~",t)}))},Muted:function(e){this.player.muted=e},Dispose:function(){if(this.player){console.log("释放播放器");try{this.player.pause()}catch(e){}this.player.unload(),this.player.detachMediaElement(),this.player.destroy(),this.player=null,this.ClearBuffer=null}}}},p=d,m=(a("4915"),a("2877")),h=Object(m["a"])(p,n,o,!1,null,null,null);t["default"]=h.exports},a32c:function(e,t,a){},b043:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"topbar",class:{topmost:e.IsClient}},[a("div",{staticClass:"left"},[a("el-button",{directives:[{name:"intro",rawName:"v-intro",value:"主菜单，所有的功能都可以从这里找到。",expression:"'主菜单，所有的功能都可以从这里找到。'"}],staticClass:"btn_menu",attrs:{icon:"iconfont icon_Menu"},on:{click:e.OpenMenu}}),a("router-link",{directives:[{name:"intro",rawName:"v-intro",value:"Logo，点击这里可以返回主页面。",expression:"'Logo，点击这里可以返回主页面。'"}],staticClass:"logo",attrs:{to:"/",title:"回首页"}},[a("el-image",{attrs:{src:e.LOGOURL,fit:"scale-down"}},[a("template",{slot:"error"},[a("i",{staticClass:"iconfont icon_xiaoyuan"}),a("span",[e._v(e._s(this.$root.PlatformName))])])],2)],1)],1),a("div"),a("div",{staticClass:"right"},[a("el-popover",{attrs:{trigger:"hover","popper-class":"popover_topbar popover_msg",width:"320"}},[a("header",[e._v("站内消息通知")]),a("div",e._l(e.Messages,(function(t){return a("router-link",{key:t.ID,attrs:{to:"#"}},[a("span",[e._v(e._s(t.Title))]),a("time",[e._v(e._s(t.Time))])])})),1),a("footer",[a("router-link",{attrs:{to:"/msg/0"}},[e._v("查看更多")])],1),a("el-button",{directives:[{name:"intro",rawName:"v-intro",value:"站内信：您收到的所有消息都在这里。",expression:"'站内信：您收到的所有消息都在这里。'"}],attrs:{slot:"reference"},slot:"reference"},[a("el-badge",{attrs:{"is-dot":e.UnReadMsg}},[a("i",{staticClass:"iconfont icon_msg"})])],1)],1),a("el-popover",{attrs:{trigger:"hover","popper-class":"popover_topbar popover_acc",width:"300"}},[a("div",{staticClass:"acc"},[a("div",{staticClass:"user"},[a("el-avatar",{staticClass:"userPic",attrs:{size:"small"}},[a("el-image",{staticClass:"img",attrs:{src:e.DefaultHeadURL},on:{load:e.succ}},[a("img",{attrs:{slot:"error",src:e.HeaderURL},slot:"error"}),a("img",{attrs:{slot:"placeholder",src:e.HeaderURL},slot:"placeholder"})])],1),a("span",[e._v(e._s(e.UserName))])],1),a("div",{staticClass:"oper"},[a("router-link",{attrs:{to:"/ps/mi"}},[e._v("基本资料")]),a("router-link",{attrs:{to:"/ps/p"}},[e._v("修改头像")]),a("router-link",{attrs:{to:"/ps/s"}},[e._v("个人设置")])],1)]),a("footer",[a("a",{on:{click:e.LogOut}},[e._v("退出登录")])]),a("el-button",{directives:[{name:"intro",rawName:"v-intro",value:"您的头像，点击这里，您可以设置个人资料，修改头像等操作。",expression:"'您的头像，点击这里，您可以设置个人资料，修改头像等操作。'"}],attrs:{slot:"reference"},slot:"reference"},[a("el-avatar",{staticClass:"userPic",attrs:{size:"small"}},[a("el-image",{staticClass:"img",attrs:{src:e.DefaultHeadURL}},[a("img",{attrs:{slot:"error",src:e.HeaderURL},slot:"error"}),a("img",{attrs:{slot:"placeholder",src:e.HeaderURL},slot:"placeholder"})])],1)],1)],1),a("el-tooltip",{attrs:{content:"帮助引导"}},[a("el-button",{directives:[{name:"intro",rawName:"v-intro",value:"点击这里，将会对当前页面的功能进行一步一步引导。",expression:"'点击这里，将会对当前页面的功能进行一步一步引导。'"}],attrs:{icon:"iconfont icon_Help"},on:{click:e.Guide}})],1),a("el-popover",{attrs:{trigger:"hover","popper-class":"popover_topbar popover_Help"}},[a("div",e._l(e.Helps,(function(t,n){return a("a",{key:n,on:{click:function(a){return e.GoTo(t)}}},[e._v(" "+e._s(t.Title)+" ")])})),0),a("footer",[a("router-link",{attrs:{to:"#"}},[e._v("关于")])],1),a("el-button",{attrs:{slot:"reference",icon:"el-icon-warning-outline"},slot:"reference"})],1),e.IsClient?a("el-tooltip",{attrs:{content:"传输列表"}},[a("el-button",{on:{click:e.Transfer}},[a("el-badge",{staticClass:"badge",attrs:{value:e.TransferCount,hidden:e.TransferCount<=0,max:99}},[a("i",{staticClass:"el-icon-sort"})])],1)],1):e._e(),e.IsClient?a("el-tooltip",{attrs:{content:"最小化"}},[a("el-button",{attrs:{icon:"el-icon-minus"},on:{click:e.Minimize}})],1):e._e(),e.IsClient?a("el-tooltip",{attrs:{content:"关闭"}},[a("el-button",{attrs:{icon:"el-icon-close",type:"danger"},on:{click:e.Close}})],1):e._e()],1)])},o=[],s=(a("99af"),a("96cf"),a("c964")),r=a("67dc"),i=a("6237"),l={data:function(){return{IsNeutral:!1,Messages:[],Helps:[{Title:"提交建议",URL:"#"},{Title:"技术支持",URL:"http://www.fjrh.cn",Open:!0}],DefaultHeadURL:null,HeaderURL:a("3827"),UnReadMsg:!1,UserName:"",LOGOURL:"",TransferCount:0}},mounted:function(){var e=this;this.IsClient&&(window.TransferCountCallBack=function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.TransferCount=a;case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());var t=r["a"].GetUserInfo();this.UserName=t?t.UserName:"",t&&(this.DefaultHeadURL="".concat(this.$root.DownloadURL,"?filename=").concat(t.UserID,"&fileType=1&platFormType=1&").concat(Math.random())),this.$nextTick((function(){e.$root.SrvConfigInfo&&(e.IsNeutral=e.$root.SrvConfigInfo.Neutral),e.LOGOURL="".concat(e.$root.DownloadURL,"?filename=").concat(Date.now(),"&fileType=11&platFormType=1")}))},methods:{succ:function(){var e=new Image;e.src=this.DefaultHeadURL,60===e.width&&(this.DefaultHeadURL=a("3827"))},Guide:function(){this.VueIntro.start()},GoTo:function(e){if(e.Code)switch(e.Code){case"Guide":break}else e.URL&&(window.Open?this.IsClient||window.open(e.URL):window.location=e.URL)},Minimize:function(){i["a"].Minimize()},Close:function(){r["a"].RemoveToken(),i["a"].Close()},Transfer:function(){i["a"].Transfer()},OpenMenu:function(){this.$parent.ShowMenu=!this.$parent.ShowMenu},LogOut:function(){r["a"].RemoveToken(),2===this.$root.SrvConfigInfo.UnifiedLogin?(window.location.href=this.$root.SrvConfigInfo.UnifiedloginOutUrl,this.IsClient?this.$router.push("/Login"):window.location.href=this.$root.SrvConfigInfo.UnifiedloginURL):this.$router.push("/Login")},handleUrl:function(e){this.DefaultHeadURL=e}},created:function(){this.$bus.on("advatar",this.handleUrl)},beforeDestroy:function(){this.$bus.off("advatar",this.handleUrl)}},c=l,u=(a("d119"),a("2877")),f=Object(u["a"])(c,n,o,!1,null,null,null);t["default"]=f.exports},b1e0:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"import-source"},[a("div",{staticClass:"import-box"},[a("div",{staticClass:"inner-box"},[a("div",{staticClass:"top"},[a("i",{staticClass:"iconfont icon_upload"}),a("p",{staticClass:"p"},[e._v("拖拽文件到此处也可以上传")]),"video"===e.type?a("p",{staticClass:"tip"},[e._v("推荐使用mp4和flv格式")]):e._e(),"audio"===e.type?a("p",{staticClass:"tip"},[e._v("推荐使用mp3，WMA,FLAC,WAV格式")]):e._e(),"doc"===e.type?a("p",{staticClass:"tip"},[e._v("请上传doc，docx，pdf，ppt，pptx格式")]):e._e()]),a("el-button",{staticClass:"btn-upload",attrs:{slot:"trigger",type:"primary",icon:"iconfont icon_upload",size:"mini"},slot:"trigger"},[e._v("上传文件")])],1),"video"===e.type?a("el-row",{staticClass:"tip-row"},[a("el-col",{attrs:{span:8}},[e._v("视频大小：上传的文件大小上限600M，视频内容最大时长2hv")]),a("el-col",{attrs:{span:8}},[e._v("上传格式：mp4,flv,avi,wmv,mov,webm,mpeg4,ts,mpg,rm,rmvb,mkv,m4v.")]),a("el-col",{attrs:{span:8}},[e._v("视频码率：分别率最大支持1920×1080 120fps，音频码率最高320kbps（AAC编码）")])],1):e._e(),"audio"===e.type?a("el-row",{staticClass:"tip-row"},[a("el-col",{attrs:{span:8}},[e._v("视频大小：上传的文件大小上限200M")]),a("el-col",{attrs:{span:8}},[e._v("上传格式：MP3，WMA，FLAC，WAV.")]),a("el-col",{attrs:{span:8}},[e._v("视频码率：音频码率最高400kbps")])],1):e._e()],1),a("div",{staticClass:"title"},[e._v("上传文件列表")]),a("SubTable",{attrs:{"custom-class":"",Loading:e.Loading,Subbutton:!1,ShowSelectColumn:!1,ShowExport:!1,Columns:e.Columns,Datas:e.Datas},on:{"update:Datas":function(t){e.Datas=t},"update:datas":function(t){e.Datas=t},LoadData:e.LoadData},scopedSlots:e._u([{key:"ExAction",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh-right",size:"mini",plain:""},on:{click:function(a){return e.reUpload(t.row)}}},[e._v("重新上传")])]}}])}),a("div",{staticClass:"footer"},[a("el-button",{staticClass:"btn-file-cfm",attrs:{type:"primary"}},[e._v("完成")]),a("span",{staticClass:"upload-tip"},[e._v("使用上传文件创建广播计划")])],1)],1)},o=[],s=(a("d3b7"),{components:{SubTable:function(){return a.e("chunk-f50b1686").then(a.bind(null,"8264"))}},props:{type:{type:String,default:"video"}},data:function(){return{Loading:!1,Datas:[{fileName:"dfsdfsd"}],Columns:[{Code:"fileName",Header:"文件名称",Fixed:"left",MinWidth:"150"},{Code:"curSpeed",Header:"当前速度",Slot:!0,MinWidth:"100"},{Code:"uploaded",Header:"上传进度",Slot:!0,MinWidth:"120"},{Code:"progress",Header:"进度条",MinWidth:"180"},{Code:"desc",Header:"操作",Slot:!0,Fixed:"right",ShowBaseActionBtn:!0,NeedViewBtn:!1,UnNeedEditBtn:!0,UnNeedEstateBtn:!0,Align:"center",Width:"300"}]}},computed:{acceptType:function(){switch(this.$route.params.type){case"video":return"video/*";case"audio":return"audio/*";case"doc":return".doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document";default:return"video/*"}}},methods:{LoadData:function(){},reUpload:function(e){}}}),r=s,i=(a("91bb"),a("2877")),l=Object(i["a"])(r,n,o,!1,null,null,null);t["default"]=l.exports},b385:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sckviewer"},[a("Calendar",{attrs:{ScheduledDate:e.ScheduleDate,ChooseDate:e.ChooseDate},on:{MonthChanged:e.MonthChanged,Changed:e.DateChanged,"update:ScheduledDate":function(t){e.ScheduleDate=t},"update:scheduled-date":function(t){e.ScheduleDate=t},"update:ChooseDate":function(t){e.ChooseDate=t},"update:choose-date":function(t){e.ChooseDate=t}}}),a("p",{staticClass:"title"},[e._v(e._s(e.FormatDate(e.ChooseDate))+"督导计划")]),e.evalplans?a("div",{staticClass:"lists"},[a("ul",e._l(e.evalplans,(function(t,n){return a("li",{key:n},[a("div",{class:{over:1!==t.EVALPState}},[a("span",[e._v(e._s(t.LessonClsTime))]),a("span",[e._v("~")]),a("span",[e._v(e._s(t.LessonOutTime))])]),a("div",[a("p",[a("span",[e._v("计划："+e._s(t.EVALPName))]),a("span",[e._v("第"+e._s(t.CSLesson)+"节")])]),a("p",[a("span",[e._v("课程："+e._s(t.CSTitle))]),0===t.EVALPState?a("span",{staticClass:"red"},[e._v("已结束")]):e._e(),1===t.EVALPState?a("span",{staticClass:"green"},[e._v("进行中")]):e._e(),2===t.EVALPState?a("span",{staticClass:"blue"},[e._v("未开始")]):e._e()]),a("p",[a("span",[e._v("教师："+e._s(t.teachers))])]),a("p",[a("span",[e._v("班级："+e._s(t.classs))])])])])})),0)]):e._e(),e.evalplans?e._e():a("div",{staticClass:"none"},[a("p",[e._v(e._s(e.FormatMonthDay(e.ChooseDate))+" 无计划")])])],1)},o=[],s=(a("4160"),a("d3b7"),a("159b"),a("96cf"),a("c964")),r=a("a397"),i=a("c1df"),l=a.n(i),c={components:{Calendar:function(){return a.e("chunk-46a8bd6e").then(a.bind(null,"c192"))}},props:{},data:function(){return{ScheduleDate:[],ChooseDate:new Date,evalplans:[]}},mounted:function(){var e=this.MonthHeadDate(this.ChooseDate),t=this.MonthEndDate(this.ChooseDate),a=this.DayHeadDate(this.ChooseDate),n=this.DayEndDate(this.ChooseDate);this.LoadData(e,t,a,n)},methods:{FormatDate:function(e){return l()(e).format("YYYY-MM-DD")},FormatMonthDay:function(e){return l()(e).format("MM-DD")},MonthHeadDate:function(e){return l()(e).format("YYYY-MM")+"-01 00:00:00"},MonthEndDate:function(e){return l()(e).format("Y-MM")+"-"+l()(l()(e).format("Y-MM"),"Y-MM").daysInMonth()+" 23:59:59"},DayHeadDate:function(e){return l()(e).format("YYYY-MM-DD")+" 00:00:00"},DayEndDate:function(e){return l()(e).format("YYYY-MM-DD")+" 23:59:59"},DateChanged:function(e){var t=this.MonthHeadDate(e),a=this.MonthEndDate(e),n=this.DayHeadDate(e),o=this.DayEndDate(e);this.LoadData(t,a,n,o)},LoadData:function(e,t,a,n){var o=this;return Object(s["a"])(regeneratorRuntime.mark((function s(){var i,l;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return i=o.$parent.$route.params.id,s.next=3,r["a"].EVALPlan.GetEVALByDate(i,e,t,a,n);case 3:l=s.sent,o.ScheduleDate=[],o.evalplans=null,l.Result?(l.Dates&&l.Dates.length>0&&l.Dates.forEach((function(e){o.ScheduleDate.push(e.Time)})),l.Datas&&l.Datas.length>0&&(o.evalplans=[],l.Datas.forEach((function(e){o.evalplans.push(e)})))):o.$message({showClose:!0,message:l.Info,type:"error",duration:1e3});case 7:case"end":return s.stop()}}),s)})))()}}},u=c,f=(a("8a43"),a("2877")),d=Object(f["a"])(u,n,o,!1,null,null,null);t["default"]=d.exports},b3ca:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-select",{attrs:{filterable:"",multiple:e.multiple,placeholder:e.placeholder,clearable:"","collapse-tags":"",size:e.size,"reserve-keyword":""},on:{change:e.ChangeHandle},model:{value:e.Value,callback:function(t){e.Value=t},expression:"Value"}},e._l(e.Datas,(function(e){return a("el-option",{key:e.GaugeID,attrs:{label:e.GaugeName,value:e.GaugeID}})})),1)},o=[],s=(a("4160"),a("159b"),a("96cf"),a("c964")),r=a("a397"),i={props:{size:{type:String,default:"mini"},multiple:{type:Boolean,default:!1},value:{},text:{type:String,default:""},TooltipPlacement:{type:String,default:"right"},placeholder:{type:String,default:"请输入关键词"}},data:function(){return{Value:this.value,Datas:[]}},mounted:function(){this.LoadData()},watch:{value:function(e){this.Value=e,this.LoadData()}},methods:{ChangeHandle:function(){var e=this;if(this.$emit("update:value",this.Value),this.Value&&this.multiple){var t="";this.Value.forEach((function(a,n){t+=a,n<e.Value.length-1&&(t+=",")})),this.$emit("Filter",t)}},LoadData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r["a"].Gauge.GetAllDatas();case 2:a=t.sent,a&&(e.Datas=a.Datas);case 4:case"end":return t.stop()}}),t)})))()}}},l=i,c=a("2877"),u=Object(c["a"])(l,n,o,!1,null,null,null);t["default"]=u.exports},b45c:function(e,t,a){"use strict";a("db17")},bd49:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{center:"","custom-class":"create-repair",title:"创建报修单","close-on-click-modal":!1,visible:e.show,modal:e.isModal,"modal-append-to-body":!1},on:{"update:visible":function(t){e.show=t},close:e.close}},[a("el-form",{ref:"Form",attrs:{"label-position":"right",model:e.Form,rules:e.Rules,"label-width":e.LabelWidth,size:"mini","status-icon":""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.ConfirmForm(t)}}},[e._l(e.formList,(function(t,n){return a("el-row",{key:n,attrs:{gutter:5}},e._l(t,(function(t,n){return a("el-col",{key:n,attrs:{span:t.span}},[a("el-form-item",{attrs:{label:t.label+": ",prop:t.prop}},["text"===t.type?a("span",[e._v(e._s(e.Form[t.prop]))]):e._e(),"equip"===t.type?a("Room",{attrs:{Level:3,value:e.Form[t.prop],name:e.Form.deviceName,ClsRoomID:e.Form.ClsRoomID,Values:e.RoomID,placeholder:"请选择教室"},on:{"update:value":function(a){return e.$set(e.Form,t.prop,a)},"update:name":function(t){return e.$set(e.Form,"deviceName",t)},"update:ClsRoomID":function(t){return e.$set(e.Form,"ClsRoomID",t)},"update:cls-room-i-d":function(t){return e.$set(e.Form,"ClsRoomID",t)},"update:Values":function(t){e.RoomID=t},"update:values":function(t){e.RoomID=t}}}):e._e(),"sel"===t.type?a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.getTypename},model:{value:e.Form[t.prop],callback:function(a){e.$set(e.Form,t.prop,a)},expression:"Form[a.prop]"}},e._l(e.FTypeArry,(function(e,t){return a("el-option",{key:t,attrs:{label:e.Value,value:e.code}})})),1):e._e(),"desc"===t.type?a("el-input",{attrs:{type:"textarea",rows:5},model:{value:e.Form[t.prop],callback:function(a){e.$set(e.Form,t.prop,a)},expression:"Form[a.prop]"}}):e._e(),"code"===t.type?a("Meta",{attrs:{value:e.comFault,code:"FJRH_CommonFaults"},on:{"update:value":function(t){e.comFault=t},change:e.GetFault}}):e._e()],1)],1)})),1)})),a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"报修照片:",prop:"pic"}},[a("Upload",{ref:"fp",attrs:{fileType:".jpg, .png",slotTip:"只能上传jpg/png文件，且不超过500kb"}})],1)],1)],1)],2),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button-group",[a("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"mini",autofocus:"","native-type":"submit",loading:e.loading},on:{click:e.ConfirmForm}},[e._v("确 定")]),a("el-button",{attrs:{icon:"el-icon-close",size:"mini"},on:{click:e.close}},[e._v("取 消")])],1)],1)],1)},o=[],s=(a("7db0"),a("4160"),a("d3b7"),a("159b"),a("96cf"),a("c964")),r=a("a397"),i=a("db13"),l=a("67dc"),c="",u="",f={components:{Room:function(){return a.e("chunk-46a8bd6e").then(a.bind(null,"88ce"))},Upload:function(){return a.e("chunk-46a8bd6e").then(a.bind(null,"68f8"))},Meta:function(){return a.e("chunk-f50b1686").then(a.bind(null,"4342"))}},props:{LabelWidth:{type:String,default:"120px"},visible:{type:Boolean,default:!1},Did:{type:String,default:""},Cid:{type:String,default:""},isModal:{type:Boolean,default:!0}},data:function(){return{RoomID:[],show:!1,FTypeArry:[],formList:[{label:"维修申报人",prop:"draapplicantname",type:"text",span:24},{label:"报修教室",prop:"ClsRoomID",type:"equip",span:12},{label:"故障类型",prop:"FTID",type:"sel",span:12},{label:"常用故障",prop:"comFault",type:"code",span:24},{label:"故障描述",prop:"DRFailure",type:"desc",span:24}],Form:{dojsrh:"",username:"",dostatuscode:"",ClsRoomID:"",clsroomname:"",deviceid:"",deviceName:"",draapplicant:"",draapplicantname:"",drapprover:"",drapprovername:"",FTID:"",ftypename:"",drfaulttime:"",DRFailure:"",picType:20,pic:"",msg:""},comFault:"",Rules:{DRFailure:[{required:!0,trigger:"blur",message:"请填写故障描述"}],ClsRoomID:[{required:!0,trigger:"blur",message:"请选择教室"}]},loading:!1}},mounted:function(){this.formList=Object(i["h"])(this.formList,2,[{r:1,c:1},{r:3,c:1},{r:4,c:1}]);var e=l["a"].GetUserInfo();c=e.UserID,u=e.UserName,this.Form.draapplicant=c,this.Form.draapplicantname=u,this.Form.drapprover=c,this.Form.drapprovername=u,this.Form.dojsrh=c,this.Form.username=u,this.loadFtp()},watch:{visible:function(e){this.show=e,e||(this.$refs.Form.resetFields(),this.Form.clsroomname="",this.Form.ftypename="",this.comFault="")},Did:function(e){var t=this;this.$nextTick((function(){t.Form.deviceid=e}))},Cid:function(e){var t=this;this.$nextTick((function(){t.Form.ClsRoomID=e}))}},methods:{loadFtp:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r["a"].FaultType.GetDatas();case 2:a=t.sent,a.Datas&&a.Datas.length>0&&(a.Datas.forEach((function(e){e.code=e.Key.FTID})),e.FTypeArry=a.Datas);case 4:case"end":return t.stop()}}),t)})))()},getTypename:function(e){var t=this.FTypeArry.find((function(t){return t.code===e}));t&&(this.Form.ftypename=t.Value)},GetFault:function(e){this.Form.DRFailure=e},getRoom:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n="",!e){a.next=5;break}return a.next=4,r["a"].Device.GetRoomData(e);case 4:n=a.sent;case 5:t.Form.dostatuscode=n?n.deviceState:"";case 6:case"end":return a.stop()}}),a)})))()},ConfirmForm:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.loading=!0,e.RoomID[2]&&(e.Form.ClsRoomID=e.RoomID[2]),e.$refs.Form.validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(a){var n,o,s,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=14;break}return e.getRoom(e.Form.deviceid),t.next=4,e.$refs.fp.Upload(6,[{field:"picName",value:""}]);case 4:for(s in e.Form.pic=t.sent,o=[],e.Form)o.push(e.Form[s]);return t.next=9,(n=r["a"].Repair).Create.apply(n,o);case 9:l=t.sent,l&&(e.show=!1,e.loading=!1,e.$emit("load")),Object(i["m"])(l,"保存"),t.next=15;break;case 14:return t.abrupt("return",!1);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return t.stop()}}),t)})))()},close:function(){this.$emit("update:visible",!1),this.$emit("close")}}},d=f,p=(a("f417"),a("2877")),m=Object(p["a"])(d,n,o,!1,null,null,null);t["default"]=m.exports},cb54:function(e,t,a){},cd23:function(e,t,a){"use strict";a("a32c")},cdca:function(e,t,a){},d119:function(e,t,a){"use strict";a("cdca")},db17:function(e,t,a){},df0c:function(e,t,a){"use strict";a("6e3b")},e1f7:function(e,t,a){},f1c1:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"video-player"},[a("div",{ref:"videoBox",staticClass:"Player"},[a("Player",{ref:"Player",attrs:{IsLive:e.IsLive,autoplay:!0,source:e.CurrentURL,type:e.Type,IsMuted:!1,IsPaused:e.IsPaused,duration:e.Duration},on:{"update:IsLive":function(t){e.IsLive=t},"update:is-live":function(t){e.IsLive=t},"update:IsPaused":function(t){e.IsPaused=t},"update:is-paused":function(t){e.IsPaused=t},"update:duration":function(t){e.Duration=t},CurrentTime:e.CurrentTimeChange,PlayEnded:e.PlayEnded,dblclick:e.FullScreenHandler}}),a("div",{staticClass:"controlbar"},[a("div",{staticClass:"controlbar-bg"}),e.IsLive?e._e():a("el-slider",{staticClass:"progress",attrs:{min:0,max:e.Duration,"format-tooltip":e.FormatDuration},on:{change:e.SetProcess},nativeOn:{mousedown:function(t){return e.progressMousedownHandler(t)},mouseup:function(t){return e.progressMouseupHandler(t)}},model:{value:e.progress,callback:function(t){e.progress=t},expression:"progress"}}),a("span",[e._v(e._s(e.IsPaused))]),a("el-tooltip",{attrs:{content:"播放",placement:"top"}},[e.IsPaused?a("div",{staticClass:"play-btn iconfont icon_Play",on:{click:e.Play}}):e._e()]),a("el-tooltip",{attrs:{content:"暂停",placement:"top"}},[e.IsPaused?e._e():a("div",{staticClass:"play-btn iconfont icon_pause_1",on:{click:e.Pause}})]),e.IsLive?e._e():a("div",{staticClass:"time-display"},[a("span",{staticClass:"current-time",staticStyle:{display:"inline"}},[e._v(e._s(e.FormatDuration(e.progress)))]),a("span",{staticClass:"time-bound",staticStyle:{display:"inline"}},[e._v("/")]),a("span",{staticClass:"duration",staticStyle:{display:"inline"}},[e._v(e._s(e.FormatDuration(e.Duration)))])]),a("el-tooltip",{attrs:{content:e.isFullScreen?"退出全屏":"全屏",placement:"top"}},[a("div",{staticClass:"fullscreen-btn iconfont",class:{icon_fullscreen:!e.isFullScreen,icon_exit_fullscreen:e.isFullScreen},on:{click:e.FullScreenHandler}})]),a("el-popover",{attrs:{"popper-class":"volume-control",trigger:"hover",placement:"top"}},[a("el-slider",{attrs:{vertical:""},on:{change:e.SetVolume},model:{value:e.volume,callback:function(t){e.volume=t},expression:"volume"}}),a("div",{staticClass:"volume iconfont",class:{icon_volume:e.volume>0,icon_mute:e.volume<=0},attrs:{slot:"reference"},on:{click:e.ChangeMuted},slot:"reference"})],1)],1)],1)])},o=[],s=(a("99af"),a("d3b7"),a("93bf")),r=a.n(s),i=a("c1df"),l=a.n(i),c=a("db13"),u={name:"r-video",components:{Player:function(){return Promise.all([a.e("chunk-0efeaae2"),a.e("chunk-45c93279")]).then(a.bind(null,"b06f"))}},props:{mediaSrc:{type:String,required:!0},mediaPoster:{type:String,default:a("2722")},mediaHeight:{type:String,default:"100%"},IsLive:{type:Boolean,default:!1}},data:function(){return{mediaLoading:!0,mediaError:!1,PlayList:[],CurrentURL:"http://",CurrentIndex:0,Type:this.IsLive?"flv":"mp4",IsLoaded:!1,progress:0,volume:100,beforeMuted:100,IsPaused:!1,Duration:0,ProgressIsDrag:!1,IsExpand:!1,isFullScreen:!1}},watch:{mediaSrc:function(e,t){this.CurrentURL=e}},methods:{retry:function(){},Download:function(e){},PlayEnded:function(){this.$emit("PlayEnded")},FullScreenHandler:function(){r.a.isEnabled&&r.a.toggle(this.$refs.videoBox)},ChangeMuted:function(){this.volume>0?(this.beforeMuted=this.volume,this.volume=0):this.volume=this.beforeMuted,this.SetVolume(this.volume)},SetVolume:function(e){this.$refs.Player&&this.$refs.Player.Volume(e)},FormatDuration:function(e){var t=l.a.duration(e,"seconds");return"".concat(Object(c["k"])(t.hours(),2),":").concat(Object(c["k"])(t.minutes(),2),":").concat(Object(c["k"])(t.seconds(),2))},progressMousedownHandler:function(){this.ProgressIsDrag=!0},progressMouseupHandler:function(){this.ProgressIsDrag=!1},CurrentTimeChange:function(e){this.ProgressIsDrag||(this.progress=e)},SetProcess:function(e){this.$refs.Player&&this.$refs.Player.CurrentTime(e)},Play:function(){this.CurrentURL=this.mediaSrc,this.$refs.Player&&this.$refs.Player.Play()},Pause:function(){this.$refs.Player&&this.$refs.Player.Pause()},Stop:function(){this.$refs.Player&&this.$refs.Player.Stop()},Dispose:function(){try{this.$refs.Player&&(console.log("释放"),this.$refs.Player.Pause(),this.$refs.Player.Dispose())}catch(e){console.log(e)}this.progress=0,this.Duration=0}},mounted:function(){var e=this;r.a.on("change",(function(){e.isFullScreen=r.a.isFullscreen}))},beforeDestroy:function(){r.a.off("change"),this.Dispose()}},f=u,d=(a("b45c"),a("df0c"),a("2877")),p=Object(d["a"])(f,n,o,!1,null,"81d0c2fe",null);t["default"]=p.exports},f417:function(e,t,a){"use strict";a("5923")},f84d:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-select",{attrs:{"popper-class":"selLesson",filterable:"",placeholder:e.placeholder,multiple:e.multiple,"collapse-tags":!0,clearable:!1,size:e.size},on:{change:e.ChangeHandle},model:{value:e.Value,callback:function(t){e.Value=t},expression:"Value"}},e._l(e.Datas,(function(t){return a("el-option-group",{key:t.label,attrs:{label:t.label}},e._l(t.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label+" "+t.text,value:t.value,disabled:t.disabled}},[a("span",[e._v(e._s(t.label))]),a("span",[e._v(e._s(t.text))])])})),1)})),1)},o=[],s=(a("4160"),a("159b"),a("96cf"),a("c964")),r=a("a397"),i=a("c1df"),l=a.n(i),c={props:{size:{type:String,default:"mini"},DisabledByDate:{},value:{},multiple:{type:Boolean,default:!1},placeholder:{type:String,default:"请选择"}},watch:{value:function(e,t){e!==t&&(this.Value=this.value)},DisabledByDate:function(e,t){var a=this;this.Datas.forEach((function(t){var n=!e||l()(e).isAfter(l()(new Date),"day");t.options.forEach((function(e){e.disabled=!n&&l()(e.LessonClsTime,"HH:mm:ss").isSameOrBefore(new Date),e.disabled&&e.value===a.Value&&(a.Value="",a.$emit("update:value",a.Value))}))}))}},data:function(){return{Value:this.value,Datas:[]}},mounted:function(){this.LoadData()},methods:{ChangeHandle:function(){var e=this;this.$emit("update:value",this.Value),this.Datas.forEach((function(t){t.options.forEach((function(t){t.value===e.Value&&(e.$emit("update:LessonClsTime",t.LessonClsTime),e.$emit("update:LessonOutTime",t.LessonOutTime))}))})),this.$emit("Filter",this.Value)},LoadData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.Datas=[{label:"上午",options:[]},{label:"下午",options:[]}],t.next=3,r["a"].Lesson.GetCurrentLessions();case 3:a=t.sent,a&&(n=!e.DisabledByDate||l()(e.DisabledByDate).isAfter(l()(new Date),"day"),a.Result&&(a.Datas.forEach((function(t){var a=0;a=t.LessonClsTime<"12:00:00"?0:1,e.Datas[a].options.push({label:"第"+t.LessonSession+"节",value:t.LessonSession,disabled:!n&&l()(t.LessonClsTime,"HH:mm:ss").isSameOrBefore(new Date),LessonClsTime:t.LessonClsTime,LessonOutTime:t.LessonOutTime,text:t.LessonClsTime.substring(0,5)+"~"+t.LessonOutTime.substring(0,5)})})),e.Value=e.value));case 5:case"end":return t.stop()}}),t)})))()}}},u=c,f=(a("0acb"),a("2877")),d=Object(f["a"])(u,n,o,!1,null,null,null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-07106397.202312271831.8526ece9.js.map