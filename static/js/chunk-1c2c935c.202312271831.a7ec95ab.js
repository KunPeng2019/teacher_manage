(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c2c935c"],{"154b":function(e,t,a){},"202e":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"form",staticClass:"edit-file-wrap file-form",attrs:{model:e.form,rules:e.formRule,"label-width":"95px","label-position":"left",size:"mini","status-icon":""}},[a("el-form-item",{attrs:{label:"直播名称：",prop:"PSName"}},[a("el-input",{staticClass:"name-input mr10",attrs:{maxlength:"30",clearable:"","show-word-limit":"",placeholder:"请输入直播名称"},model:{value:e.form.PSName,callback:function(t){e.$set(e.form,"PSName",t)},expression:"form.PSName"}}),a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("点击预览")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.chooseAdd}},[e._v("选择地址")])],1),a("el-form-item",{attrs:{label:"直播地址：",prop:"PSURL"}},[a("el-input",{staticClass:"name-input mr10",attrs:{maxlength:"150",clearable:"","show-word-limit":"",placeholder:"请输入直播地址"},model:{value:e.form.PSURL,callback:function(t){e.$set(e.form,"PSURL",t)},expression:"form.PSURL"}})],1),a("el-form-item",{attrs:{label:"播放时长：",prop:"duration"}},[a("el-time-picker",{staticClass:"live-duration",attrs:{"value-format":"HH:mm:ss","picker-options":{selectableRange:"00:00:00 - 23:00:00"},placeholder:"请选择播放时长"},model:{value:e.form.duration,callback:function(t){e.$set(e.form,"duration",t)},expression:"form.duration"}})],1),a("el-form-item",{staticClass:"mb0",attrs:{label:"播放音量："}},[a("div",{staticClass:"block"},[a("span",{staticClass:"iconfont icon_volume"}),a("el-slider",{attrs:{min:0,max:15,step:1},model:{value:e.form.volume,callback:function(t){e.$set(e.form,"volume",t)},expression:"form.volume"}}),a("span",{staticClass:"tip"},[e._v("当前音量"+e._s(e.form.volume))])],1)])],1),a("el-dialog",{attrs:{center:"",title:"直播地址列表",visible:e.addrVisible,"modal-append-to-body":!1,"close-on-click-modal":!1,width:"800px"},on:{"update:visible":function(t){e.addrVisible=t}}},[a("SubTable",{attrs:{Loading:e.Loading,Subbutton:!1,ShowExport:!1,Columns:e.Columns,Datas:e.Datas,selections:e.selects,ShowPage:!0,singleChoose:!0},on:{"update:Datas":function(t){e.Datas=t},"update:datas":function(t){e.Datas=t},"update:selections":function(t){e.selects=t},LoadData:e.LoadData}}),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button-group",[a("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"mini",autofocus:"","native-type":"submit"},on:{click:e.cfmChoose}},[e._v("确 定")]),a("el-button",{attrs:{icon:"el-icon-close",size:"mini"},on:{click:function(t){e.visible=!1}}},[e._v("取 消")])],1)],1)],1)],1)},n=[],s=(a("4160"),a("d3b7"),a("159b"),a("96cf"),a("c964")),o=a("a397"),r=a("db13"),l={components:{SubTable:function(){return a.e("chunk-f50b1686").then(a.bind(null,"8264"))}},data:function(){var e=function(e,t,a){t&&"00:00:00"!==t?a():a(new Error("请设置播放时长"))};return{isEdit:!0,form:{duration:"00:00:00",PSName:"",PSURL:"",volume:7},formRule:{PSName:[{required:!0,message:"请输入直播名称",trigger:"blur"}],PSURL:[{required:!0,message:"请输入直播地址",trigger:"blur"}],duration:[{required:!0,trigger:"blur",validator:e}]},addrVisible:!1,Loading:!1,Datas:[],Columns:[{Code:"PSName",Header:"直播地址名称",Fixed:"left"},{Code:"PSURL",Header:"直播地址"}],selects:null}},mounted:function(){var e=this.$route.params.bplid;e&&this.LoadData()},methods:{editorChange:function(e){this.form.content=e},chooseAdd:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.addrVisible=!0,t.next=3,o["a"].ProgramSource.GetDatas("",1,9999,"PSName",0);case 3:a=t.sent,a&&a.Datas&&(e.Datas=a.Datas);case 5:case"end":return t.stop()}}),t)})))()},LoadData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o["a"].BP.GetBroadcastPlan(e.$route.params.bplid);case 2:a=t.sent,a&&a.Result&&(e.form.PSName=a.Data.BPLName,e.form.PSURL=a.Data.BPLURL,e.form.duration="".concat(Object(r["g"])(a.Data.BPLDuration)),e.form.volume=a.Data.BPLVolume);case 4:case"end":return t.stop()}}),t)})))()},cfmChoose:function(){this.form.PSName=this.selects[0].PSName,this.form.PSURL=this.selects[0].PSURL,this.addrVisible=!1},Confirm:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.form.validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(a){var i,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=6;break}return i="".concat(Object(r["i"])(e.form.duration)),t.next=4,o["a"].BP.AddPlanItem(e.$route.params.bplid,e.$route.params.bpid,e.form.PSName,6,null,1,0,0,i,null,3,null,e.form.volume,e.form.PSURL);case 4:n=t.sent,n&&n.Result?e.$emit("ConfirmCompleted"):(s="",n.Info?n.Info.forEach((function(e){s+=e+"\r\n"})):s="添加失败",e.$message({message:s,type:"warning",duration:1e3}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()}}},c=l,u=(a("374a"),a("2877")),d=Object(u["a"])(c,i,n,!1,null,null,null);t["default"]=d.exports},"2c4b":function(e,t,a){},"374a":function(e,t,a){"use strict";a("a816")},"3c91":function(e,t,a){"use strict";a("154b")},"41ea":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"edit-file-wrap"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.SyncLoading,expression:"SyncLoading"}],ref:"form",staticClass:"file-form",attrs:{disabled:e.SyncLoading,model:e.form,rules:e.formRule,"label-width":"100px","label-position":"right",size:"mini","status-icon":""}},[a("el-form-item",{attrs:{"label-width":"0px",prop:"FileID"}},[a("div",{staticClass:"upload-box"},[0===e.uploadStep?[a("div",{staticClass:"btns"},[a("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.uploadLoding,expression:"uploadLoding"}],ref:"upload",class:{limit:e.form.fileList.length>=e.fileLimit},attrs:{action:e.uploadUrl,limit:e.fileLimit,"file-list":e.form.fileList,"auto-upload":!1,"on-change":e.UploadChange,"on-remove":e.RemoveHandle,"on-success":e.UploadSuccess,accept:e.acceptType,"on-progress":e.UploadProgress,"element-loading-text":"文件上传中"}},[a("el-button",{staticClass:"btn-upload",attrs:{slot:"trigger",type:"primary",icon:"iconfont icon_yunupload",size:"small"},slot:"trigger"},[e._v("本地上传")])],1),e.form.fileList.length>0?a("el-button",{staticClass:"btn-upload ml80",attrs:{slot:"trigger",type:"success",icon:"iconfont icon_yunupload",size:"small"},on:{click:e.Upload},slot:"trigger"},[e._v("上传到服务器")]):a("el-button",{staticClass:"btn-upload ml80",attrs:{slot:"trigger",type:"primary",icon:"iconfont el-icon-folder-checked",size:"small"},on:{click:e.yunUpload},slot:"trigger"},[e._v("网盘选择")])],1),a("p",{staticClass:"p"},[e._v("请选择上传"+e._s(e.title)+"的方式")]),a("p",{staticClass:"tip"},[e._v("本地上传比较慢，建议从网盘上传")])]:e._e(),1===e.uploadStep?[a("i",{staticClass:"status el-icon-upload2"}),a("el-progress",{attrs:{"stroke-width":8,percentage:e.uploadProgress}}),a("p",{staticClass:"p1"},[e._v("正在上传中...")]),a("p",{staticClass:"tip"},[e._v("文件正在上传中，请稍等")]),a("div",{staticClass:"btns-0"},[a("el-button",{attrs:{type:"primary"},on:{click:e.CancelUpload}},[e._v("取消上传")])],1)]:e._e(),2===e.uploadStep?[a("i",{staticClass:"el-icon-success"}),a("p",{staticClass:"p2"},[e._v("上传成功")]),a("p",{staticClass:"tip"},[e._v("文件上传成功，点击下方按钮进行操作")]),a("div",{staticClass:"btns-1"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-view"},on:{click:function(t){return e.viewSource(e.type)}}},[e._v("预览文件")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-sort"},on:{click:e.BackUpload}},[e._v("替换文件")])],1)]:e._e(),3===e.uploadStep?[a("i",{staticClass:"el-icon-error"}),a("p",{staticClass:"p2"},[e._v("上传失败")]),a("p",{staticClass:"tip"},[e._v(e._s(e.ErrInfo))]),a("div",{staticClass:"btns-0"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-back"},on:{click:e.BackUpload}},[e._v("返回")])],1)]:e._e()],2)]),a("el-form-item",{attrs:{label:"标题名称：",prop:"BPLName"}},[a("el-input",{staticClass:"name-input",attrs:{maxlength:"60",clearable:"","show-word-limit":"",placeholder:"请输入名称"},model:{value:e.form.BPLName,callback:function(t){e.$set(e.form,"BPLName",t)},expression:"form.BPLName"}})],1),"doc"===e.type?a("el-form-item",{attrs:{label:"图片切换："}},[a("el-input-number",{attrs:{min:3,max:100,precision:0}}),a("em",{staticClass:"t"},[e._v("秒")])],1):e._e(),a("el-form-item",{attrs:{label:"循环模式：",prop:"BPLLoopMode"}},[a("el-radio-group",{staticClass:"timing-radio",model:{value:e.form.BPLLoopMode,callback:function(t){e.$set(e.form,"BPLLoopMode",t)},expression:"form.BPLLoopMode"}},[a("el-radio",{attrs:{label:0}},[a("span",{staticClass:"text"},[e._v("循环次数")]),a("el-input-number",{attrs:{min:0,max:10,precision:0},model:{value:e.form.BPLLoopCount,callback:function(t){e.$set(e.form,"BPLLoopCount",t)},expression:"form.BPLLoopCount"}}),a("em",{staticClass:"t"},[e._v("次")]),e.form.BPLLoopCount>1?a("em",{staticClass:"t"},[e._v("，循环间隔：")]):e._e(),e.form.BPLLoopCount>1?a("el-input-number",{attrs:{min:0,max:100,precision:0},model:{value:e.form.BPLLoopInterval,callback:function(t){e.$set(e.form,"BPLLoopInterval",t)},expression:"form.BPLLoopInterval"}}):e._e(),e.form.BPLLoopCount>1?a("em",{staticClass:"t"},[e._v("秒")]):e._e()],1),a("el-radio",{attrs:{label:1}},[a("span",{staticClass:"text"},[e._v("播放时长")]),a("el-time-picker",{attrs:{"value-format":"HH:mm:ss","picker-options":{selectableRange:"00:00:00 - 23:00:00"},placeholder:"请选择播放时长"},model:{value:e.form.BPLDuration,callback:function(t){e.$set(e.form,"BPLDuration",t)},expression:"form.BPLDuration"}})],1)],1)],1),(e.type,a("el-form-item",{staticClass:"mb0",attrs:{label:"播放音量：",prop:"BPLVolume"}},[a("div",{staticClass:"block"},[a("span",{staticClass:"iconfont icon_volume"}),a("el-slider",{attrs:{min:0,max:15,step:1},model:{value:e.form.BPLVolume,callback:function(t){e.$set(e.form,"BPLVolume",t)},expression:"form.BPLVolume"}}),a("span",{staticClass:"tip"},[e._v("当前音量"+e._s(e.form.BPLVolume))])],1)]))],1),a("YunFile",{attrs:{show:e.yunVisible,title:e.title,type:e.type},on:{"update:show":function(t){e.yunVisible=t},OnChooseFile:e.OnChooseFile}}),a("el-dialog",{attrs:{"custom-class":"video-view",title:e.form.BPLName,visible:e.videoVisible,"modal-append-to-body":!1,"close-on-click-modal":!1,"before-close":e.onVideoViewClose,"destroy-on-close":!0,center:""},on:{"update:title":function(t){return e.$set(e.form,"BPLName",t)},"update:visible":function(t){e.videoVisible=t}}},[a("PlayBox",{ref:"PlayBox",attrs:{Videos:e.videoList,ShowPlayList:!1},on:{"update:Videos":function(t){e.videoList=t},"update:videos":function(t){e.videoList=t}}})],1),a("el-dialog",{attrs:{"custom-class":"audio-view",title:e.form.BPLName,visible:e.audioVisible,"modal-append-to-body":!1,"close-on-click-modal":!1,"before-close":e.onAudioViewClose,"destroy-on-close":!0,center:""},on:{"update:title":function(t){return e.$set(e.form,"BPLName",t)},"update:visible":function(t){e.audioVisible=t}}},[a("audio",{ref:"audio",attrs:{autoplay:"",src:e.audioUrl,controls:"",controlslist:"nodownload"}},[e._v(" 您的浏览器不支持 audio 标签。 ")])])],1)},n=[],s=(a("99af"),a("b0c0"),a("d3b7"),a("96cf"),a("c964")),o=a("a397"),r=a("67dc"),l=a("db13"),c={components:{YunFile:function(){return a.e("chunk-2c8a7b59").then(a.bind(null,"aa66"))},PlayBox:function(){return a.e("chunk-461ba3a0").then(a.bind(null,"2b22"))}},props:{title:{type:String,default:"视频"},type:{type:String,default:"video"}},data:function(){return{SyncLoading:!1,ErrInfo:"",uploadUrl:"",key:"",uploadStep:0,fileLimit:1,uploadLoding:!1,uploadProgress:0,yunVisible:!1,videoVisible:!1,videoList:[],audioVisible:!1,audioUrl:"",MaterialStorePath:"",form:{FileID:null,fileList:[],BPLName:"",loopInterval:0,BPLLoopMode:0,BPLLoopCount:1,BPLDuration:"00:00:00",BPLVolume:7,BPLTime:"",BPLLoopInterval:1},formRule:{FileID:[{required:!0,message:"请选择素材文件",trigger:"blur"}],BPLLoopMode:[{required:!0,message:"请选择循环模式",trigger:"blur"}],BPLLoopInterval:[{required:!0,message:"请选择循环间隔",trigger:"blur"}],BPLName:[{required:!0,message:"请输入标题名称",trigger:"blur"}]}}},mounted:function(){var e=this.$route.params.bplid;e&&this.LoadData();var t=r["a"].GetConfigInfo();if(t){var a=r["a"].GetUserInfo();this.uploadUrl="http://".concat(t.Host,":").concat(t.Port,"/FJRH.Campus/UploadIPBFile?uid=").concat(a.UserID)}},computed:{acceptType:function(){switch(this.$route.params.type){case"video":return"video/*";case"audio":return"audio/*";case"doc":return".doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document";default:return"video/*"}}},methods:{Confirm:function(){var e=this;this.SyncLoading=!0,this.$refs.form.validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(a){var i,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=19;break}i=1,t.t0=e.type,t.next="video"===t.t0?5:"audio"===t.t0?7:"doc"===t.t0?9:11;break;case 5:return i=1,t.abrupt("break",11);case 7:return i=2,t.abrupt("break",11);case 9:return i=4,t.abrupt("break",11);case 11:return n="".concat(Object(l["i"])(e.form.BPLDuration)),t.next=14,o["a"].BP.AddPlanItem(e.$route.params.bplid,e.$route.params.bpid,e.form.BPLName,i,e.form.FileID,e.form.BPLLoopMode,e.form.BPLLoopInterval,e.form.BPLLoopCount,n,null,3,null,e.form.BPLVolume);case 14:s=t.sent,s&&s.Result&&e.$emit("ConfirmCompleted"),e.SyncLoading=!1,t.next=20;break;case 19:e.SyncLoading=!1;case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},LoadData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o["a"].BP.GetBroadcastPlan(e.$route.params.bplid);case 2:a=t.sent,a&&a.Result&&(e.form.BPLName=a.Data.BPLName,e.form.FileID=a.Data.BPLRelationID,e.form.BPLLoopMode=a.Data.BPLLoopMode,e.form.BPLLoopInterval=a.Data.BPLLoopInterval,e.form.BPLLoopCount=a.Data.BPLLoopCount,e.form.BPLDuration="".concat(Object(l["g"])(a.Data.BPLDuration)),e.form.BPLVolume=a.Data.BPLVolume);case 4:case"end":return t.stop()}}),t)})))()},yunUpload:function(){this.yunVisible=!0},UploadChange:function(e,t){console.log(e),this.form.fileList=t},CancelUpload:function(){this.$refs.upload.abort()},UploadSuccess:function(e,t,a){e.Result?(this.uploadStep=2,this.form.FileID=e.ID,this.form.BPLName=t.name):(this.uploadStep=3,this.ErrInfo=t.response.Info)},OnChooseFile:function(e){this.uploadStep=2,this.form.FileID=e[0].MaterialID,this.form.BPLName=e[0].MaterialName},UploadProgress:function(e,t,a){this.uploadProgress=e.percent},Upload:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.form.fileList&&e.form.fileList.length>0&&(e.uploadProgress=0,e.ErrInfo="",e.uploadStep=1,e.$refs.upload.submit());case 1:case"end":return t.stop()}}),t)})))()},BackUpload:function(){var e=this;this.uploadStep=0,this.$nextTick((function(){e.$refs.upload.clearFiles(),e.form.fileList=[],e.form.FileID="",e.form.BPLName=""}))},RemoveHandle:function(e,t){this.form.fileList=t},viewSource:function(e){"video"===e?(this.videoVisible=!0,this.videoList=[{Path:"/IPB/".concat(this.form.FileID,".mp4")}]):"audio"===e&&(this.audioVisible=!0,this.audioUrl="http://".concat(this.$root.SrvConfigInfo.LiveHost,":").concat(this.$root.SrvConfigInfo.LivePort,"/vod/IPB/").concat(this.form.FileID,".mp3"))},changeFile:function(){},onVideoViewClose:function(){var e=this;this.videoList=[],this.$refs.PlayBox&&this.$refs.PlayBox.Dispose(),this.$nextTick((function(){e.videoVisible=!1}))},onAudioViewClose:function(){this.audioUrl="",this.audioVisible=!1}}},u=c,d=(a("b7ad"),a("2877")),m=Object(d["a"])(u,i,n,!1,null,null,null);t["default"]=m.exports},"4aae":function(e,t,a){"use strict";a("8b15")},"5ac9":function(e,t,a){},"624b":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"course-sum"}},[a("Table",{attrs:{ModuleCode:"ReportStatistics",ModuleName:"课程统计",Loading:e.Loading,ShowExport:!0,ShowCreate:!1,KeyFileld:"CourseID",Columns:e.Columns,SortField:e.SortField,SortDir:e.SortDir,Datas:e.Datas,PageIndex:e.PageIndex,PageSize:e.PageSize,TotalCounts:e.TotalCounts,SearchKey:e.SKey,SearchValue:e.Key,UnNeedEstateBtn:!0,UnNeedDelBtn:!0,ShowSelectColumn:!1},on:{"update:SortField":function(t){e.SortField=t},"update:sort-field":function(t){e.SortField=t},"update:SortDir":function(t){e.SortDir=t},"update:sort-dir":function(t){e.SortDir=t},"update:Datas":function(t){e.Datas=t},"update:datas":function(t){e.Datas=t},"update:PageIndex":function(t){e.PageIndex=t},"update:page-index":function(t){e.PageIndex=t},"update:PageSize":function(t){e.PageSize=t},"update:page-size":function(t){e.PageSize=t},"update:SearchKey":function(t){e.SKey=t},"update:search-key":function(t){e.SKey=t},"update:SearchValue":function(t){e.Key=t},"update:search-value":function(t){e.Key=t},LoadData:e.LoadData,ExportHandle:e.ExportHandle,ViewRowHandle:e.View}},[a("template",{slot:"ExSearch"},[a("el-date-picker",{attrs:{clearable:"",size:"mini",type:"daterange",align:"right","range-separator":"至","start-placeholder":"任务开始日期","end-placeholder":"任务结束日期"},on:{change:e.ChangeData},model:{value:e.DateRange,callback:function(t){e.DateRange=t},expression:"DateRange"}}),e._v("课程类型： "),a("el-select",{attrs:{placeholder:"请选择",size:"mini"},on:{change:e.ChangeDate},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],2),a("Evaluators",{attrs:{show:e.visibles,data:e.pdata,mCode:"ReportStatistics"},on:{"update:show":function(t){e.visibles=t}}})],1)},n=[],s=(a("4160"),a("a9e3"),a("b680"),a("d3b7"),a("159b"),a("96cf"),a("c964")),o=a("a397"),r=a("db13"),l={props:["GetNum"],components:{Table:function(){return a.e("chunk-347ed62b").then(a.bind(null,"0748"))},Evaluators:function(){return a.e("chunk-badd3dc4").then(a.bind(null,"a0a6"))}},data:function(){return{Loading:!1,visibles:!1,canEdit:!0,count:0,back:!0,pdata:"",ddata:"",Columns:[{Code:"CourseName",Header:"课程名称"},{Code:"TeacherName",Header:"教师名称"},{Code:"totalnum",Header:"被评数"},{Code:"avgscore",Header:"综合得分（百分制）",Sort:"custom"},{Code:"oprate",Header:"操作",Width:"120",NeedViewBtn:!0,UnNeedEditBtn:!0,UnNeedEstateBtn:!0,UnNeedDelBtn:!0,Slot:!0,ShowBaseActionBtn:!0}],Datas:[{CourseName:"人工智能",tName:"marry",VoteNumber:5,highest:86,lowestPoints:78,score:86}],PageIndex:1,PageSize:20,TotalCounts:0,Key:"",SKey:"",SortField:"",SortDir:0,Estate:"",DateRange:[new Date(Date.now()-8.64*Math.pow(10,7)*30),new Date],options:[{label:"合格课程",value:1},{label:"不合格课程",value:2}],value:""}},mounted:function(){},watch:{GetNum:function(e){e>0&&this.LoadData(0)}},methods:{View:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.visibles=!0,t.pdata=e;case 2:case"end":return a.stop()}}),a)})))()},Close:function(){this.visibles=!1},LoadData:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.Datas=[],t.Loading=!0,a.next=4,o["a"].EVALPlan.GetReportStatisticDatas(2,"",Object(r["f"])(t.DateRange[0],"yyyy-MM-dd"),Object(r["f"])(t.DateRange[1],"yyyy-MM-dd"),e,0,t.PageIndex,t.PageSize,t.SortField,t.SortDir);case 4:i=a.sent,i&&i.Datas&&i.Datas.length>0?(i.Datas.forEach((function(e){e.jgl=100*Number(e.jgl).toFixed(2)+"%",e.avgscore=Number(e.avgscore).toFixed(2)})),t.Datas=i.Datas,t.TotalCounts=i.rowsCount):(t.Datas=[],t.wData=[],t.TotalCounts=0),t.Loading=!1;case 7:case"end":return a.stop()}}),a)})))()},ChangeDate:function(e){this.PageIndex=1,this.PageSize=20,this.LoadData(e)},ChangeData:function(){this.PageIndex=1,this.PageSize=20,this.LoadData(),this.$emit("CourseTotal")},ExportHandle:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){var n,s,l;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,o["a"].EVALPlan.ExportData(2,"",Object(r["f"])(t.DateRange[0],"yyyy-MM-dd"),Object(r["f"])(t.DateRange[1],"yyyy-MM-dd"),0,0);case 2:n=i.sent,n&&(s=a("19de"),l="课程统计.xls",s(n,l)),e();case 5:case"end":return i.stop()}}),i)})))()}}},c=l,u=(a("d1d3"),a("2877")),d=Object(u["a"])(c,i,n,!1,null,null,null);t["default"]=d.exports},"80fa":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"student-question"},[a("el-tabs",{on:{"tab-click":e.GetStudentQuestion},model:{value:e.questionTabSelected,callback:function(t){e.questionTabSelected=t},expression:"questionTabSelected"}},e._l(e.tabOptions,(function(t,i){return a("el-tab-pane",{key:i,attrs:{label:t.label,name:t.index}},[t.dataList&&t.dataList.length>0?a("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}]},[a("el-col",{attrs:{span:18}},[a("div",{ref:"chat",refInFor:!0,staticClass:"chat"},[a("div",{staticClass:"chat_content"},e._l(t.dataList,(function(t,i){return a("div",{key:i,class:t.studentID!==e.selectStudentID?"chat_item":"chat_item checked_item"},[a("div",{staticClass:"chat_news"},[a("div",{staticClass:"chat_news_person"},[a("img",{directives:[{name:"real-img",rawName:"v-real-img",value:[t.userID,t.studentID],expression:"[sub.userID, sub.studentID]"}],attrs:{src:"",alt:""}}),a("div",{staticClass:"chat_news_name"},[a("div",[e._v(e._s(t.studentName||"未知人员"))]),a("div",{staticClass:"time"},[e._v(e._s(e.formatDate(t.createTime,"yyyy-MM-dd hh:mm:ss")))])])]),a("div",{staticClass:"chat_news_cont"},[a("span",[e._v(e._s(t.content))])])])])})),0)])]),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"summary"},[e._v("提问人员")]),a("div",{staticClass:"list_person"},e._l(t.dataPerson,(function(t,i){return a("div",{key:i,staticClass:"person_item",class:e.selectStudentID===t.studentID?"person_selected":"",on:{click:function(a){e.selectStudentID=t.studentID}}},[a("img",{directives:[{name:"real-img",rawName:"v-real-img",value:[t.userID,t.studentID],expression:"[sub.userID, sub.studentID]"}],attrs:{src:"",alt:""}}),a("span",[e._v(e._s(t.studentName))]),a("span")])})),0)])],1):a("div",{staticClass:"no-q",staticStyle:{"text-align":"center"}},[e._v("暂无提问")])],1)})),1)],1)},n=[],s=(a("4de4"),a("c740"),a("4160"),a("159b"),a("db13")),o=a("a397"),r={name:"StudentQuestion",props:{classHour:{type:Object}},data:function(){return{dataList:[],studentQuestion:[],selectStudentID:"",listLoading:!1,questionList:[],questionTabOptions:[],questionTabSelected:""}},computed:{tabOptions:function(){return this.questionTabOptions.filter((function(e,t){return t>0}))}},created:function(){this.courseQuestion()},methods:{formatDate:function(e,t){return Object(s["f"])(e,t)},courseQuestion:function(){this.questionTabOptions=[];var e=this.classHour.state;this.questionTabOptions=[{index:"0",attribute:1,label:"预习",disabled:!0,dataList:[],dataPerson:[]},{index:"1",attribute:2,label:"课中",disabled:!0,dataList:[],dataPerson:[]},{index:"2",attribute:3,label:"复习",disabled:!1,dataList:[],dataPerson:[]}],this.questionTabSelected=this.questionTabOptions[e].index,this.GetStudentQuestion()},GetStudentQuestion:function(){var e=this,t=this.questionTabOptions[this.questionTabSelected];t.dataList=[],t.dataPerson=[];var a=[],i=[];this.listLoading=!0,o["a"].IQuestion.ClassHourDataList(this.classHour.id,this.questionTabOptions[this.questionTabSelected].attribute).then((function(n){n.Result&&n.Datas&&n.Datas.length>0&&(n.Datas.forEach((function(e){var t={studentID:e.Key["StudentID"],userID:e["UserID"],studentNo:e["sno"],studentName:e["StudentName"],id:e.Key["CIID"],content:e.Key["QContent"],state:e.Key["State"],createTime:e.Key["CreateTime"],attribute:e.Key["Attribute"]};a.push(t);var n=i.findIndex((function(t){return t.studentID===e.Key["StudentID"]}));-1===n&&i.push({studentID:e.Key["StudentID"],userID:e["UserID"],studentNo:e["sno"],studentName:e["StudentName"]})})),t.dataList=a,t.dataPerson=i),e.listLoading=!1})).catch((function(){e.listLoading=!1}))}},watch:{classHour:{immediate:!0,handler:"courseQuestion"}}},l=r,c=(a("3c91"),a("2877")),u=Object(c["a"])(l,i,n,!1,null,null,null);t["default"]=u.exports},"8b15":function(e,t,a){},"8d16":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dr-tree"},[e.addbtn?a("div",{staticClass:"dr-head"},[a("div",{staticClass:"add-btn"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.addGauge}},[e._v("添加列表")])],1)]):e._e(),a("div",{staticClass:"box"},e._l(e.trees,(function(t,i){return a("div",{key:i,staticClass:"first-node"},[a("div",{staticClass:"first-node-head"},[a("div",{staticClass:"title"},[e._v(" "+e._s(t.label)+" ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:i>0,expression:"i >0"}],staticClass:"opts"},[a("i",{staticClass:"el-icon-delete",on:{click:function(t){return e.titleRemove(i)}}})])]),a("el-collapse-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.isFold,expression:"!item.isFold"}],staticClass:"dr-container"},[a("el-form",{attrs:{size:"mini","label-suffix":":","label-width":"80px",disabled:!e.addbtn}},e._l(t.children,(function(t,i){return a("div",{key:i,staticClass:"second-node"},[a("el-row",[a("el-form-item",{attrs:{label:"维修配件"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择维修配件"},model:{value:t.dr_pj,callback:function(a){e.$set(t,"dr_pj",a)},expression:"sub.dr_pj"}},e._l(e.pjOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"维修方式"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择维修方式"},model:{value:t.dr_method,callback:function(a){e.$set(t,"dr_method",a)},expression:"sub.dr_method"}},e._l(e.RepailWaysoptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"维修费用"}},[a("el-input-number",{attrs:{min:0,max:9999999,precision:0},model:{value:t.dr_money,callback:function(a){e.$set(t,"dr_money",a)},expression:"sub.dr_money"}})],1)],1),a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"维修单位"}},[a("el-input",{attrs:{type:"textarea",rows:"2",clearable:""},model:{value:t.dr_unit,callback:function(a){e.$set(t,"dr_unit",a)},expression:"sub.dr_unit"}})],1)],1),a("el-col",[a("el-form-item",{attrs:{label:"维修备注"}},[a("el-input",{attrs:{type:"textarea",rows:"2",clearable:""},model:{value:t.dr_demo,callback:function(a){e.$set(t,"dr_demo",a)},expression:"sub.dr_demo"}})],1)],1)],1)],1)})),0)],1)])],1)})),0),a("div",{staticClass:"dr-head"},[a("div",{staticClass:"add-btn"},[e.trees.length>0&&e.addbtn?a("el-button",{attrs:{loading:e.SyncLoading,type:"primary",icon:"el-icon-check",size:"mini"},on:{click:e.SaveGauge}},[e._v("保 存")]):e._e()],1)])])},n=[],s=(a("4160"),a("a434"),a("d3b7"),a("25f0"),a("159b"),a("96cf"),a("c964")),o=a("a397"),r={props:["trees","pjOptions","canAdd","drid","addbtn"],data:function(){return{RepailWaysoptions:[],UnitOptions:[],SyncLoading:!1}},mounted:function(){this.RepailWaysoptions=[],this.getMetadatas("RepailWays",this.RepailWaysoptions)},methods:{getMetadatas:function(e,t){var a=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){var n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,o["a"].Metadata.GetTrees(e);case 2:n=i.sent,n.Result?n.Datas.forEach((function(a){a.MetadataCode!==e&&t.push({value:a.MetadataID,label:a.MetadataName})})):a.$message({showClose:!0,message:n.message,type:n.type});case 4:case"end":return i.stop()}}),i)})))()},addGauge:function(){var e=this.trees.length+1,t=[{dr_pj:"",dr_method:"",dr_unit:"",dr_money:"",dr_demo:""}],a={label:"子列表"+e,isFold:!1,showHeadOpts:!0,children:t};this.trees.push(a)},titleRemove:function(e){this.trees.splice(e,1)},SaveGauge:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.SyncLoading=!0,t.next=3,o["a"].Repair.UpdatePJ(e.drid,JSON.stringify(e.trees).toString());case 3:a=t.sent,a&&(e.SyncLoading=!1),a.Result?e.$message({showClose:!0,message:"保存成功",type:"success"}):e.$message({showClose:!0,message:"保存失败",type:"error"});case 6:case"end":return t.stop()}}),t)})))()}}},l=r,c=(a("eeba"),a("2877")),u=Object(c["a"])(l,i,n,!1,null,null,null);t["default"]=u.exports},9803:function(e,t,a){},a816:function(e,t,a){},b7ad:function(e,t,a){"use strict";a("cb09")},cb09:function(e,t,a){},cfd2:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"personal-bottom-pager"},[a("el-pagination",{directives:[{name:"loading",rawName:"v-loading",value:e.Loading,expression:"Loading"}],attrs:{"current-page":e.PIndex,"page-sizes":e.PageSizes,"page-size":e.PSize,total:e.TotalCounts,layout:"total, sizes, prev, pager, next, jumper"},on:{"update:currentPage":function(t){e.PIndex=t},"update:current-page":function(t){e.PIndex=t},"update:pageSize":function(t){e.PSize=t},"update:page-size":function(t){e.PSize=t},"size-change":e.PageSizeChanged,"current-change":e.PageChanged}})],1)},n=[],s=(a("a9e3"),{props:{Loading:{type:Boolean,default:!1},PageIndex:{type:Number,default:1},PageSizes:{type:Array,default:function(){return[10,20,30,40,50]}},PageSize:{type:Number,default:10},TotalCounts:{type:Number,default:0}},watch:{$route:function(e,t){this.$emit("update:PageIndex",1),this.$emit("LoadData")}},computed:{PIndex:{get:function(){return this.PageIndex},set:function(){this.$emit("update:PageIndex",this.PageIndex)}},PSize:{get:function(){return this.PageSize},set:function(){this.$emit("update:PageSize",this.PageSize)}}},data:function(){return{}},methods:{PageSizeChanged:function(e){this.$emit("update:PageIndex",1),this.$emit("update:PageSize",e),this.$emit("LoadData")},PageChanged:function(e){console.log(e),this.$emit("update:PageIndex",e),this.$emit("update:PageSize",this.PageSize),this.$emit("LoadData")}}}),o=s,r=(a("4aae"),a("2877")),l=Object(r["a"])(o,i,n,!1,null,null,null);t["default"]=l.exports},d1d3:function(e,t,a){"use strict";a("5ac9")},d53d:function(e,t,a){"use strict";a("2c4b")},db3a:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"teacher-class-list",attrs:{shadow:"never"}},[a("div",{staticClass:"flex-between list-head"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{replace:"",to:"/main/teacherSpace/courseManage/courseList"}},[e._v(" "+e._s(e.course["CourseName"])+" ")]),a("el-breadcrumb-item",[e._v("班级管理")])],1),a("div",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.searchData}},[e._v("刷新")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.open()}}},[e._v("添加班级")])],1)],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"card-warp",class:{mini:e.IsMINI}},e._l(e.dataList,(function(t,i){return a("el-card",{key:i,attrs:{shadow:"hover"}},[a("div",{staticClass:"card-hd"},[t.Key["ClassName"].length>8?a("el-tooltip",{attrs:{content:t.Key["ClassName"],placement:"top"}},[a("span",[e._v(e._s(t.Key["ClassName"]))])]):a("span",[e._v(e._s(t.Key["ClassName"]))]),a("i",{staticClass:"el-icon-delete",on:{click:function(a){return e.dataDrop(t)}}})],1),a("div",{staticClass:"card-btns"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.open(t)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(a){return e.dataView(t)}}},[e._v("人数："+e._s(t["Total"]))])],1)])})),1),a("el-dialog",{attrs:{center:"",title:"edit"===e.mode?"班级修改":"创建班级","close-on-click-modal":!1,visible:e.dialogVisible,"modal-append-to-body":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"form",attrs:{"label-position":"right",model:e.form,rules:e.rules,"label-width":"130px",size:"mini","status-icon":""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.saveData(t)}}},[a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"班级名称：",prop:"className"}},[a("el-input",{attrs:{type:"text"},model:{value:e.form.className,callback:function(t){e.$set(e.form,"className",t)},expression:"form.className"}})],1),a("el-form-item",{attrs:{label:"允许加入："}},[a("el-switch",{model:{value:e.form.allowJoin,callback:function(t){e.$set(e.form,"allowJoin",t)},expression:"form.allowJoin"}})],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button-group",[a("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"mini",autofocus:""},on:{click:e.saveData}},[e._v(" "+e._s("edit"===e.mode?"提交修改":"立即创建")+" ")]),a("el-button",{attrs:{icon:"el-icon-close",size:"mini"},on:{click:e.close}},[e._v("取 消")])],1)],1)],1)],1)},n=[],s=(a("4160"),a("159b"),a("a397")),o=a("db13"),r={data:function(){return{IsMINI:!1,courseID:Object(o["v"])("campus_CourseID"),course:Object(o["v"])("campus_Course"),loading:!1,dataList:[],mode:"",dialogVisible:!1,form:{courseID:Object(o["v"])("campus_CourseID"),className:"",classID:"",allowJoin:!0},rules:{courseName:{required:!0,min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}},btnLoading:!1}},created:function(){this.searchData()},methods:{searchData:function(){var e=this;this.dataList=[],this.loading=!0,s["a"].IClass.DataList(this.courseID).then((function(t){t.Result&&t.Datas&&t.Datas.length>0&&(t.Datas.sort((function(e){return e["CreateTime"]})).reverse(),t.Datas.forEach((function(t){e.dataList.push(t)}))),e.loading=!1})).catch((function(){e.loading=!1}))},dataDrop:function(e){var t=this;this.$confirm("此操作将删除该班级, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.dataDelete(e)})).catch((function(){}))},dataDelete:function(e){var t=this;s["a"].IClass.DataDelete(e.Key["ClassID"]).then((function(e){e.Result&&(t.$message({message:"删除成功！",type:"success"}),setTimeout((function(){t.searchData()}),100))})).catch((function(){t.$message({showClose:!0,message:"操作失败",type:"error"})}))},dataView:function(e){Object(o["y"])("campus_Class",e),Object(o["y"])("campus_ClassID",e.Key["ClassID"]),this.$router.push("/p/student")},open:function(e){e?(this.form.className=e.Key["ClassName"],this.form.classID=e.Key["ClassID"],this.form.allowJoin=!!e.Key["AllowJoin"],this.mode="edit"):(this.form.className="",this.form.classID="",this.mode="add"),this.dialogVisible=!0},close:function(){this.form={},this.dialogVisible=!1},saveData:function(e){var t=this;this.$refs.form.validate((function(e){if(!e)return t.$message({showClose:!0,message:"请输入正确格式",type:"error"}),!1;t.btnLoading=!0,s["a"].IClass.TeacherDataSave(t.form.classID,t.form.className||"",t.form.courseID,t.form.allowJoin?"1":"0").then((function(e){e.Result?(t.$message({message:"操作成功！",type:"success"}),t.dialogVisible=!1,t.searchData()):e.Info&&t.$message.error(e.Info),t.btnLoading=!1})).catch((function(){t.$message.error("操作失败"),t.btnLoading=!1}))}))},AdjustSize:function(){var e=parseInt(window.innerWidth);this.IsMINI=e<1600}}},l=r,c=(a("deb1"),a("2877")),u=Object(c["a"])(l,i,n,!1,null,null,null);t["default"]=u.exports},deb1:function(e,t,a){"use strict";a("f71c")},eeba:function(e,t,a){"use strict";a("9803")},f03f:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dtrange"},[a("el-date-picker",{attrs:{size:"mini","picker-options":e.datepickerOptions,clearable:!1,editable:!1},on:{change:function(t){return e.DateTimeRangeChange(t,"Date")}},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}),a("el-time-picker",{attrs:{size:"mini",format:"HH:mm",clearable:!1,editable:!1,placeholder:"开始时间","picker-options":{selectableRange:(e.IsToday()?e.FormatTime(new Date):"00:00:00")+"-23:59:59"}},on:{change:function(t){return e.DateTimeRangeChange(t,"TimeStart")}},model:{value:e.times1,callback:function(t){e.times1=t},expression:"times1"}}),a("span",[e._v("至")]),a("el-time-picker",{attrs:{size:"mini",format:"HH:mm",clearable:!1,editable:!1,placeholder:"结束时间","picker-options":{selectableRange:e.FormatTime(e.times1,10)+"-23:59:59"}},on:{change:function(t){return e.DateTimeRangeChange(t,"TimeEnd")}},model:{value:e.times2,callback:function(t){e.times2=t},expression:"times2"}})],1)},n=[],s=(a("99af"),a("c1df")),o=a.n(s),r={props:{NotEralier:{type:Boolean,default:!0},TimeStart:{type:Date,default:function(){return new Date}},TimeEnd:{type:Date,default:function(){return new Date(o()(new Date).add(30,"m").format("YYYY-MM-DD HH:mm:ss"))}}},watch:{},data:function(){var e=this;return{date:new Date,times1:this.TimeStart,times2:this.TimeEnd,expand:this.Expand,showMore:"",datepickerOptions:{firstDayOfWeek:this.FirstDayOfWeek,disabledDate:function(t){return!e.NotEralier||t.getTime()<o()(new Date).add(-1,"days")}}}},mounted:function(){},methods:{IsToday:function(){return o()(this.date).isSame(new Date,"day")},FormatTime:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return o()(e).add(t,"m").format("HH:mm:ss")},DateTimeRangeChange:function(e,t){switch(t){case"Date":this.IsToday()&&(this.times1=new Date,this.times2=new Date(o()(this.times1).add(30,"m").format("YYYY-MM-DD HH:mm:ss")));break;case"TimeStart":this.times2<this.times1&&(this.times2=new Date(o()(this.times1).add(30,"m").format("YYYY-MM-DD HH:mm:ss")));break;case"TimeEnd":}this.$emit("update:TimeStart",new Date("".concat(o()(this.date).format("YYYY-MM-DD")," ").concat(o()(this.times1).format("HH:mm:ss")))),this.$emit("update:TimeEnd",new Date("".concat(o()(this.date).format("YYYY-MM-DD")," ").concat(o()(this.times2).format("HH:mm:ss")))),this.$emit("change")}}},l=r,c=(a("d53d"),a("2877")),u=Object(c["a"])(l,i,n,!1,null,null,null);t["default"]=u.exports},f71c:function(e,t,a){}}]);
//# sourceMappingURL=chunk-1c2c935c.202312271831.a7ec95ab.js.map